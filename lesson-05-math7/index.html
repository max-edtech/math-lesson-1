<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>ä¸ƒå¹´ç´šæ•¸å­¸ | æ–¹ç¨‹å¼å®Œå…¨é«”</title>
    <style>
        :root { --primary: #2980b9; --danger: #c0392b; --success: #27ae60; --dark: #2c3e50; --bg: #ecf0f1; }
        body { font-family: 'Segoe UI', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; background: var(--bg); margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        
        .brand-watermark { position: fixed; bottom: 20px; right: 20px; background: rgba(26, 42, 108, 0.8); color: white; padding: 8px 15px; border-radius: 50px; font-size: 12px; pointer-events: none; z-index: 999; }
        .tabs { display: flex; width: 100%; background: white; padding: 15px 0; justify-content: center; gap: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .tab-btn { background: #f0f2f5; color: #7f8c8d; border: none; padding: 10px 25px; cursor: pointer; font-size: 1rem; border-radius: 50px; font-weight: bold; transition: 0.3s; }
        .tab-btn.active { background: var(--dark); color: white; transform: scale(1.05); }

        .container { width: 95%; max-width: 900px; background: white; margin-top: 30px; border-radius: 20px; padding: 30px; display: none; min-height: 500px; }
        .container.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        h2 { margin-top: 0; border-left: 5px solid var(--primary); padding-left: 15px; color: var(--dark); }

        /* --- å¤©å¹³ (ä½ç½®ä¸Šç§»ä¿®æ­£) --- */
        .balance-wrapper {
            position: relative; width: 100%; height: 350px; 
            background: #fbfbfb; border: 1px solid #ddd; border-radius: 10px; margin-top: 20px; overflow: hidden;
        }
        /* æ”¯é»ä¸Šç§»ï¼šbottom å¾ 20px æ”¹ç‚º 50px */
        .pivot {
            position: absolute; bottom: 60px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0; border-left: 30px solid transparent; border-right: 30px solid transparent; border-bottom: 60px solid var(--dark); z-index: 2;
        }
        /* æ©«æ¡¿ä¸Šç§»ï¼šbottom å°æ‡‰æ”¯é»å°–ç«¯ (60+60=120) */
        .beam-container {
            position: absolute; width: 500px; height: 10px; background: var(--dark); border-radius: 5px;
            bottom: 120px; left: 50%; margin-left: -250px;
            transform-origin: 50% 50%; transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55); z-index: 3;
        }
        .beam-container.tilt-cw { transform: rotate(15deg); }
        .string { width: 4px; height: 80px; background: #bdc3c7; position: absolute; top: 10px; }
        .string.left { left: 20px; } .string.right { right: 20px; }
        .pan {
            width: 130px; height: 100px; border: 4px solid var(--dark); border-top: none;
            background: rgba(255,255,255,0.9); position: absolute; top: 80px; left: 50%; transform: translateX(-50%);
            display: flex; flex-wrap: wrap-reverse; justify-content: center; align-content: flex-start; padding: 5px;
        }
        .block-x { width: 30px; height: 30px; background: var(--danger); color: white; margin: 2px; display: flex; align-items: center; justify-content: center; font-weight: bold; border-radius: 4px; }
        .block-1 { width: 22px; height: 22px; background: var(--primary); color: white; margin: 2px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; }
        .vanish { opacity: 0; transform: scale(0); transition: 0.5s; }

        /* --- è¤‡é›œåˆ†æ•¸ (æ–°ç‰ˆ) --- */
        .complex-frac-box { font-size: 1.8rem; text-align: center; margin: 30px 0; font-family: 'Times New Roman', serif; }
        .frac { display: inline-block; vertical-align: middle; text-align: center; }
        .frac .top { border-bottom: 2px solid black; display: block; padding: 0 5px; }
        .frac .btm { display: block; padding: 2px 0; }
        
        .process-flow { display: flex; flex-direction: column; gap: 20px; align-items: center; margin-top: 20px; }
        .step-row { 
            background: #fff; border: 2px solid #eee; padding: 15px 30px; border-radius: 10px; 
            font-size: 1.5rem; font-weight: bold; width: 80%; text-align: center;
            opacity: 0.3; transition: 0.5s; transform: translateY(10px);
        }
        .step-row.active { opacity: 1; transform: translateY(0); border-color: var(--primary); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .highlight-red { color: var(--danger); font-weight: bold; }
        
        /* --- ç¿»è­¯æ©Ÿ --- */
        .wp-box { background: #fffbe6; padding: 20px; border-left: 6px solid #f1c40f; font-size: 1.4rem; line-height: 1.8; border-radius: 8px; }
        .key-text { border-bottom: 3px solid #ccc; cursor: pointer; padding: 0 4px; }
        .key-text:hover { background: rgba(0,0,0,0.05); }
        .key-text.filled { background: var(--success); color: white; border-color: transparent; border-radius: 4px; }
        .slot-row { display: flex; gap: 10px; margin-top: 20px; flex-wrap: wrap; background: var(--dark); padding: 15px; border-radius: 10px; color: white; align-items: center; }
        .slot { width: 60px; height: 45px; border: 2px dashed #7f8c8d; display: flex; align-items: center; justify-content: center; cursor: pointer; background: rgba(255,255,255,0.1); }
        .slot.filled { background: white; color: var(--dark); border-style: solid; }

        .action-btn { padding: 10px 20px; border: none; border-radius: 5px; font-size: 1rem; cursor: pointer; font-weight: bold; margin: 5px; color: white; transition: 0.2s; }
        .btn-r { background: var(--danger); } .btn-g { background: var(--success); } .btn-b { background: var(--primary); } .btn-y { background: #f39c12; color: #333; }
    </style>
</head>
<body>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('balance')">âš–ï¸ å¤©å¹³ (ç­‰é‡å…¬ç†)</button>
        <button class="tab-btn" onclick="switchTab('fraction')">ğŸ’£ è¤‡é›œåˆ†æ•¸ (å»åˆ†æ¯)</button>
        <button class="tab-btn" onclick="switchTab('word')">ğŸ“ ç¿»è­¯æ©Ÿ (æ‡‰ç”¨é¡Œ)</button>
    </div>

    <div id="balance" class="container active">
        <h2>ç­‰é‡å…¬ç†ï¼šç§»é …æ³•å‰‡</h2>
        <div style="text-align:center; font-size:2rem; font-weight:bold; margin-bottom:10px;">
            <span id="eq-l">2x + 6</span> = <span id="eq-r">10</span>
        </div>
        <div class="balance-wrapper">
            <div class="beam-container" id="beam">
                <div class="string left"><div class="pan" id="pan-left"></div></div>
                <div class="string right"><div class="pan" id="pan-right"></div></div>
            </div>
            <div class="pivot"></div>
        </div>
        <div style="text-align:center; margin-top:20px;">
            <button class="action-btn btn-r" onclick="wrongMove()">âŒ éŒ¯èª¤ï¼šåªæ¸›å·¦é‚Š</button>
            <button class="action-btn btn-g" onclick="correctMove()">â­• æ­£ç¢ºï¼šåŒæ™‚æ¸› 6</button>
            <button class="action-btn btn-y" onclick="initBalance()">ğŸ”„ é‡ç½®</button>
        </div>
        <p id="bal-msg" style="text-align:center; font-weight:bold; height:30px; font-size:1.2rem; color:var(--danger);"></p>
    </div>

    <div id="fraction" class="container">
        <h2>åˆ†æ•¸æ–¹ç¨‹å¼ï¼šå»åˆ†æ¯èˆ‡æ‹¬è™Ÿé™·é˜±</h2>
        <p style="color:#666; text-align:center;">ç¶“å…¸è€ƒé¡Œï¼šå…©é‚ŠåŒæ™‚ä¹˜ä»¥æœ€å°å…¬å€æ•¸ (LCM)</p>
        
        <div class="complex-frac-box">
            <span class="frac"><span class="top">2x + 5</span><span class="btm">3</span></span>
            <span style="margin:0 10px;">-</span>
            <span class="frac"><span class="top">x - 2</span><span class="btm">2</span></span>
            <span style="margin:0 10px;">=</span>
            <span>2</span>
        </div>

        <div style="text-align:center;">
            <button class="action-btn btn-b" onclick="fracStep(1)">Step 1: æ‰¾ LCM åŒä¹˜</button>
            <button class="action-btn btn-b" onclick="fracStep(2)">Step 2: ç´„åˆ†èˆ‡æ‹¬è™Ÿ</button>
            <button class="action-btn btn-r" onclick="fracStep(3)">Step 3: æ‹†æ‹¬è™Ÿ (é™·é˜±)</button>
            <button class="action-btn btn-y" onclick="fracReset()">é‡ç½®</button>
        </div>

        <div class="process-flow">
            <div id="fs1" class="step-row">
                <span style="color:blue;">6</span> Ã— <span class="frac" style="font-size:1rem;"><span class="top">...</span><span class="btm">3</span></span> 
                - <span style="color:blue;">6</span> Ã— <span class="frac" style="font-size:1rem;"><span class="top">...</span><span class="btm">2</span></span> 
                = <span style="color:blue;">6</span> Ã— 2
                <div style="font-size:0.9rem; color:#666; margin-top:5px;">é‡é»ï¼šæ¯ä¸€é …éƒ½è¦ä¹˜ï¼åŒ…æ‹¬å¸¸æ•¸ 2ï¼</div>
            </div>
            <div id="fs2" class="step-row">
                2 ( 2x + 5 ) - 3 <span class="highlight-red">( x - 2 )</span> = 12
                <div style="font-size:0.9rem; color:#666; margin-top:5px;">é‡é»ï¼šåˆ†å­æ˜¯å€‹åœ˜é«”ï¼Œè¦åŠ <b style="color:red">æ‹¬è™Ÿ</b>ä¿è­·ï¼</div>
            </div>
            <div id="fs3" class="step-row">
                4x + 10 - 3x <span class="highlight-red">+ 6</span> = 12
                <div style="font-size:0.9rem; color:#666; margin-top:5px;">é™·é˜±ï¼šè² è² å¾—æ­£ï¼ -3 ä¹˜ -2 è®Šæˆ +6</div>
            </div>
        </div>
    </div>

    <div id="word" class="container">
        <h2>é¡Œæ„ç¿»è­¯æ©Ÿ</h2>
        <div class="wp-box">
            é¡Œç›®ï¼šçˆ¸çˆ¸çš„å¹´é½¡ <span class="key-text" onclick="fillSlot(0, '=')">æ˜¯</span> 
            å…’å­çš„ <span class="key-text" onclick="fillSlot(1, '3x')">3å€</span> 
            <span class="key-text" onclick="fillSlot(2, '-')">å°‘</span> 5 æ­²ã€‚
            <br><span style="font-size:0.9rem; color:#666;">(è¨­å…’å­ xï¼Œçˆ¸çˆ¸ y)</span>
        </div>
        <div class="slot-row">
            <span style="font-size:1.5rem; font-weight:bold;">y</span>
            <div class="slot" id="s0" onclick="clearSlot(0)"></div>
            <div class="slot" id="s1" onclick="clearSlot(1)"></div>
            <div class="slot" id="s2" onclick="clearSlot(2)"></div>
            <div class="slot filled" style="border:none;">5</div>
        </div>
        <div style="margin-top:20px; text-align:center;">
            <button class="action-btn btn-b" onclick="manualFill('+')">+</button>
            <button class="action-btn btn-b" onclick="manualFill('-')">-</button>
            <button class="action-btn btn-b" onclick="manualFill('=')">=</button>
            <button class="action-btn btn-b" onclick="manualFill('3x')">3x</button>
            <button class="action-btn btn-g" onclick="checkWp()">âœ… æª¢æŸ¥</button>
        </div>
        <p id="wp-msg" style="text-align:center; font-weight:bold; margin-top:10px;"></p>
    </div>

    <div class="brand-watermark">STEM INSIGHT</div>

    <script>
        function switchTab(id) {
            document.querySelectorAll('.container').forEach(el => el.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            event.target.classList.add('active');
        }

        // --- å¤©å¹³é‚è¼¯ ---
        function initBalance() {
            const l = document.getElementById('pan-left');
            const r = document.getElementById('pan-right');
            l.innerHTML = ''; r.innerHTML = '';
            for(let i=0; i<2; i++) l.innerHTML += `<div class="block-x">X</div>`;
            for(let i=0; i<6; i++) l.innerHTML += `<div class="block-1">1</div>`;
            for(let i=0; i<10; i++) r.innerHTML += `<div class="block-1">1</div>`;
            document.getElementById('beam').className = 'beam-container';
            document.getElementById('bal-msg').innerText = "";
            document.getElementById('eq-l').innerText = "2x + 6";
            document.getElementById('eq-r').innerText = "10";
            document.querySelectorAll('.block-1').forEach(el => el.style.opacity = '1');
        }
        function wrongMove() {
            document.getElementById('beam').className = 'beam-container tilt-cw'; // é †æ™‚é‡è½‰(å·¦è¼•å³é‡)
            document.getElementById('bal-msg').innerText = "âš ï¸ éŒ¯èª¤ï¼åªæ‹¿å·¦é‚Šï¼Œå¤©å¹³æ­ªäº†ï¼";
            document.querySelectorAll('#pan-left .block-1').forEach(el => el.style.opacity = '0.3');
        }
        function correctMove() {
            document.getElementById('beam').className = 'beam-container';
            document.getElementById('bal-msg').innerText = "âœ… æ­£ç¢ºï¼å…©é‚ŠåŒæ™‚æ‹¿æ‰ã€‚";
            const l = document.querySelectorAll('#pan-left .block-1');
            const r = document.querySelectorAll('#pan-right .block-1');
            for(let i=0; i<6; i++) { if(l[i]) l[i].classList.add('vanish'); if(r[i]) r[i].classList.add('vanish'); }
            setTimeout(() => { document.getElementById('eq-l').innerText = "2x"; document.getElementById('eq-r').innerText = "4"; }, 500);
        }
        initBalance();

        // --- è¤‡é›œåˆ†æ•¸é‚è¼¯ ---
        function fracStep(step) {
            document.querySelectorAll('.step-row').forEach(el => el.classList.remove('active'));
            for(let i=1; i<=step; i++) {
                setTimeout(() => document.getElementById('fs'+i).classList.add('active'), (i-1)*200);
            }
        }
        function fracReset() {
            document.querySelectorAll('.step-row').forEach(el => el.classList.remove('active'));
        }

        // --- ç¿»è­¯æ©Ÿé‚è¼¯ ---
        function fillSlot(idx, val) {
            for(let i=0; i<3; i++) {
                let s = document.getElementById('s'+i);
                if(!s.classList.contains('filled')) { s.innerText = val; s.classList.add('filled'); return; }
            }
        }
        function manualFill(val) { fillSlot(0, val); }
        function clearSlot(idx) {
            let s = document.getElementById('s'+idx); s.innerText = ''; s.classList.remove('filled');
            document.getElementById('wp-msg').innerText = "";
        }
        function checkWp() {
            const v0 = document.getElementById('s0').innerText;
            const v1 = document.getElementById('s1').innerText;
            const v2 = document.getElementById('s2').innerText;
            const msg = document.getElementById('wp-msg');
            if(v0 === '=' && v1 === '3x' && v2 === '-') {
                msg.innerText = "ğŸ‰ æ­£ç¢ºï¼ y = 3x - 5"; msg.style.color = "var(--success)";
            } else if(v0 === '=' && v1 === '-' && v2 === '3x') {
                msg.innerText = "âš ï¸ é™·é˜±ï¼ã€Œå°‘ 5ã€ä»£è¡¨ 5 åœ¨å¾Œé¢è¢«æ¸›ï¼"; msg.style.color = "#e67e22";
            } else {
                msg.innerText = "âŒ é †åºä¸å°å–”ï¼"; msg.style.color = "var(--danger)";
            }
        }
    </script>
</body>
</html>