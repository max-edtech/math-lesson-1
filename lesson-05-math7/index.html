<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>ä¸ƒå¹´ç´šæ•¸å­¸ | æ–¹ç¨‹å¼å¯¦æˆ°å·¥å…·ç®±</title>
    <style>
        :root { --primary: #2980b9; --danger: #c0392b; --success: #27ae60; --dark: #2c3e50; --bg: #ecf0f1; }
        body { font-family: 'Segoe UI', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; background: var(--bg); margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        
        .brand-watermark { position: fixed; bottom: 20px; right: 20px; background: rgba(26, 42, 108, 0.8); color: white; padding: 8px 15px; border-radius: 50px; font-size: 12px; pointer-events: none; z-index: 999; }
        
        /* å°èˆª */
        .tabs { display: flex; width: 100%; background: white; padding: 15px 0; justify-content: center; gap: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .tab-btn { background: #f0f2f5; color: #7f8c8d; border: none; padding: 10px 25px; cursor: pointer; font-size: 1rem; border-radius: 50px; font-weight: bold; transition: 0.3s; }
        .tab-btn.active { background: var(--dark); color: white; transform: scale(1.05); }
        .tab-btn:hover:not(.active) { background: #e0e0e0; }

        .container { width: 90%; max-width: 900px; background: white; margin-top: 30px; border-radius: 20px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); display: none; animation: slideUp 0.4s ease; }
        .container.active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        h2 { margin-top: 0; border-left: 5px solid var(--primary); padding-left: 15px; color: var(--dark); }
        .subtitle { color: #7f8c8d; font-size: 0.9rem; margin-bottom: 20px; display: block; }

        /* --- 1. å¤©å¹³ç³»çµ± (ä¿®å¾©ç‰ˆ) --- */
        .balance-stage { position: relative; width: 100%; height: 300px; margin-top: 40px; display: flex; justify-content: center; align-items: flex-end; }
        
        .balance-pivot { width: 0; height: 0; border-left: 25px solid transparent; border-right: 25px solid transparent; border-bottom: 50px solid var(--dark); position: relative; z-index: 2; margin-bottom: 0; }
        
        .balance-beam-wrapper { position: absolute; bottom: 50px; width: 80%; height: 10px; z-index: 1; display: flex; justify-content: center; }
        .balance-beam { width: 100%; height: 100%; background: var(--dark); border-radius: 5px; position: relative; transition: transform 0.6s cubic-bezier(0.4, 1.5, 0.6, 1); /* å½ˆæ€§å‹•ç•« */ }
        
        .pan { width: 140px; height: 120px; border: 3px solid var(--dark); border-top: none; position: absolute; top: 10px; display: flex; flex-wrap: wrap-reverse; align-content: flex-start; justify-content: center; padding: 5px; background: rgba(255,255,255,0.8); }
        .pan.left { left: 0; transform: translateX(-50%); border-left: 2px solid #bdc3c7; border-right: 2px solid #bdc3c7; }
        .pan.right { right: 0; transform: translateX(50%); border-left: 2px solid #bdc3c7; border-right: 2px solid #bdc3c7; }
        
        /* é€£æ¥ç·š */
        .string { width: 2px; height: 40px; background: #95a5a6; position: absolute; top: -40px; }
        .string.left { left: 0; } .string.right { right: 0; }

        /* ç©æœ¨ */
        .block-x { width: 35px; height: 35px; background: var(--danger); color: white; margin: 2px; display: flex; align-items: center; justify-content: center; font-weight: bold; border-radius: 4px; box-shadow: 2px 2px 0 rgba(0,0,0,0.1); }
        .block-1 { width: 25px; height: 25px; background: var(--primary); color: white; margin: 2px; border-radius: 50%; font-size: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 1px 1px 0 rgba(0,0,0,0.1); }
        
        .tilt-left { transform: rotate(-15deg); }
        .tilt-right { transform: rotate(15deg); }

        /* --- 2. åˆ†æ•¸é™·é˜±å€ --- */
        .eqn-display { font-size: 2.5rem; text-align: center; margin: 40px 0; font-family: 'Courier New', monospace; font-weight: bold; }
        .highlight-box { border: 3px dashed var(--danger); padding: 5px; border-radius: 5px; color: var(--danger); display: inline-block; }
        
        .step-visual { display: flex; justify-content: center; gap: 20px; opacity: 0; transition: 1s; margin-top: 20px; }
        .step-item { background: #fff3cd; padding: 10px 20px; border-radius: 10px; border: 1px solid #f1c40f; text-align: center; }

        /* --- 3. é¡Œæ„ç¿»è­¯å€ (å‡ç´šç‰ˆ) --- */
        .word-problem-area { background: #f9f9f9; padding: 30px; border-radius: 15px; font-size: 1.3rem; line-height: 2; border-left: 6px solid var(--success); }
        .keyword { border-bottom: 3px solid #ccc; cursor: pointer; padding: 0 5px; transition: 0.2s; display: inline-block; }
        .keyword:hover { background: #e8f5e9; border-color: var(--success); }
        .keyword.selected { background: var(--success); color: white; border-color: transparent; border-radius: 4px; }

        .builder-area { margin-top: 30px; padding: 20px; background: var(--dark); border-radius: 15px; color: white; display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
        .slot { width: 60px; height: 40px; background: rgba(255,255,255,0.1); border: 2px dashed #7f8c8d; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; cursor: pointer; }
        .slot.filled { background: white; color: var(--dark); border-style: solid; }
        
        .symbol-palette { margin-top: 15px; display: flex; gap: 10px; }
        .sym-btn { width: 40px; height: 40px; border-radius: 50%; border: none; background: white; border: 2px solid #ccc; font-size: 1.2rem; cursor: pointer; font-weight: bold; }
        .sym-btn:hover { background: var(--primary); color: white; border-color: var(--primary); }

        /* æŒ‰éˆ•ç¾¤ */
        .action-row { text-align: center; margin-top: 30px; }
        button.action { padding: 12px 24px; font-size: 1rem; border: none; border-radius: 8px; cursor: pointer; margin: 0 10px; font-weight: bold; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: 0.2s; }
        button.action:active { transform: scale(0.95); }
        .btn-blue { background: var(--primary); color: white; }
        .btn-red { background: var(--danger); color: white; }
        .btn-green { background: var(--success); color: white; }
    </style>
</head>
<body>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('balance')">âš–ï¸ ç­‰é‡å…¬ç† (é˜²å‘†ç‰ˆ)</button>
        <button class="tab-btn" onclick="switchTab('fraction')">ğŸ’£ åˆ†æ•¸æ®ºæ‰‹ (åŒä¹˜é™·é˜±)</button>
        <button class="tab-btn" onclick="switchTab('word')">ğŸ“ é¡Œæ„ç¿»è­¯æ©Ÿ (å¯ç·¨è¼¯)</button>
    </div>

    <div id="balance" class="container active">
        <h2>ç­‰é‡å…¬ç†ï¼šç‚ºä»€éº¼ç§»é …è¦è®Šè™Ÿï¼Ÿ</h2>
        <span class="subtitle">æ“ä½œèªªæ˜ï¼šå˜—è©¦åšã€ŒéŒ¯èª¤ã€çš„æ“ä½œï¼Œçœ‹çœ‹å¤©å¹³æœƒç™¼ç”Ÿä»€éº¼äº‹ã€‚</span>
        
        <div style="text-align:center; font-size:1.8rem; font-weight:bold; color:var(--dark);">
            <span id="eq-l">2x + 6</span> = <span id="eq-r">10</span>
        </div>

        <div class="balance-stage">
            <div class="balance-beam-wrapper">
                <div class="balance-beam" id="beam">
                    <div class="string left"><div class="pan left" id="pan-left"></div></div>
                    <div class="string right"><div class="pan right" id="pan-right"></div></div>
                </div>
            </div>
            <div class="balance-pivot"></div>
        </div>

        <div class="action-row">
            <button class="action btn-red" onclick="wrongMove()">âŒ éŒ¯èª¤ï¼šåªæ‹¿å·¦é‚Šçš„ 6</button>
            <button class="action btn-blue" onclick="correctMove()">â­• æ­£ç¢ºï¼šå…©é‚ŠåŒæ™‚æ¸› 6</button>
            <button class="action" style="background:#f1c40f; color:#333;" onclick="initBalance()">ğŸ”„ é‡ç½®</button>
        </div>
        <p id="balance-msg" style="text-align:center; height:20px; color:var(--danger); font-weight:bold;"></p>
    </div>

    <div id="fraction" class="container">
        <h2>åˆ†æ•¸æ–¹ç¨‹å¼é™·é˜±ï¼šè¢«éºå¿˜çš„å¸¸æ•¸</h2>
        <span class="subtitle">å°ç£æ®µè€ƒæœ€å¸¸å‡ºçš„é™·é˜±é¡Œã€‚è«‹æ³¨æ„æ•¸å­— 2 çš„å‘½é‹ã€‚</span>
        
        <div class="eqn-display">
            <span style="border-bottom:3px solid black; padding-bottom:5px;"> x </span> + 2 = 5
            <br><span style="font-size:1.5rem;">3</span>
        </div>

        <div class="action-row">
            <button class="action btn-red" onclick="showFractionTrap()">ğŸ’€ å­¸ç”Ÿå¸¸çŠ¯éŒ¯èª¤</button>
            <button class="action btn-green" onclick="showFractionCorrect()">âœ¨ æ­£ç¢ºè§£æ³• (åŒä¹˜ 3)</button>
        </div>

        <div id="frac-step" class="step-visual">
            <div class="step-item">x</div>
            <div class="step-item" id="const-item" style="font-weight:bold;">+ 2</div>
            <div class="step-item">= 15</div>
        </div>
        
        <div id="frac-explanation" style="text-align:center; margin-top:20px; font-size:1.2rem; color:var(--danger); font-weight:bold; min-height: 30px;"></div>
    </div>

    <div id="word" class="container">
        <h2>é¡Œæ„ç¿»è­¯æ©Ÿï¼šæŠŠä¸­æ–‡è®Šæˆæ•¸å­¸</h2>
        <span class="subtitle">é‡å°å°ç£å¸¸è¦‹çš„ã€Œæ¯”...å¤šã€ã€ã€Œæ¯”...å°‘ã€é¡Œå‹ã€‚</span>

        <div class="word-problem-area">
            é¡Œç›®ï¼š<br>
            çˆ¸çˆ¸çš„å¹´é½¡ <span class="keyword" onclick="fillSlot(0, '=')">æ˜¯</span> 
            å…’å­çš„ <span class="keyword" onclick="fillSlot(1, '3x')">3å€</span> 
            <span class="keyword" onclick="fillSlot(2, '-')">å°‘</span> 5 æ­²ã€‚
            <br>
            <span style="font-size:0.9rem; color:#666;">(è¨­å…’å­ç‚º xï¼Œçˆ¸çˆ¸ç‚º y)</span>
        </div>

        <div class="builder-area">
            <span>æ–¹ç¨‹å¼ï¼š y</span>
            <div class="slot" id="slot-0" onclick="clearSlot(0)"></div>
            <div class="slot" id="slot-1" onclick="clearSlot(1)"></div>
            <div class="slot" id="slot-2" onclick="clearSlot(2)"></div>
            <div class="slot filled" style="border:none;">5</div>
        </div>

        <div class="symbol-palette">
            <label style="margin-right:10px; align-self:center;">æ‰‹å‹•å¡«å…¥ç¬¦è™Ÿï¼š</label>
            <button class="sym-btn" onclick="manualFill('+')">+</button>
            <button class="sym-btn" onclick="manualFill('-')">-</button>
            <button class="sym-btn" onclick="manualFill('=')">=</button>
            <button class="sym-btn" onclick="manualFill('3x')">3x</button>
        </div>

        <div class="action-row">
            <button class="action btn-green" onclick="checkMath()">âœ… æª¢æŸ¥ç­”æ¡ˆ</button>
        </div>
        <p id="math-check-msg" style="text-align:center; font-weight:bold; font-size:1.2rem; margin-top:20px;"></p>
    </div>

    <div class="brand-watermark">STEM INSIGHT</div>

    <script>
        function switchTab(id) {
            document.querySelectorAll('.container').forEach(el => el.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            event.target.classList.add('active');
        }

        // --- å¤©å¹³é‚è¼¯ ---
        function initBalance() {
            const l = document.getElementById('pan-left');
            const r = document.getElementById('pan-right');
            l.innerHTML = ''; r.innerHTML = '';
            // å·¦é‚Š 2x + 6
            for(let i=0; i<2; i++) l.innerHTML += `<div class="block-x">X</div>`;
            for(let i=0; i<6; i++) l.innerHTML += `<div class="block-1">1</div>`;
            // å³é‚Š 10
            for(let i=0; i<10; i++) r.innerHTML += `<div class="block-1">1</div>`;
            
            document.getElementById('beam').className = 'balance-beam'; // reset tilt
            document.getElementById('balance-msg').innerText = "";
            document.getElementById('eq-l').innerText = "2x + 6";
            document.getElementById('eq-r').innerText = "10";
        }

        function wrongMove() {
            // åªæ¸›å·¦é‚Š
            document.getElementById('beam').classList.add('tilt-right'); // å·¦é‚Šè®Šè¼•ï¼Œå¾€å³ä¸Šç¿¹ -> å³é‚Šæ²‰
            document.getElementById('balance-msg').innerText = "âš ï¸ éŒ¯èª¤ï¼åªæ¸›å·¦é‚Šï¼Œå¤©å¹³æ­ªæ‰äº†ï¼ç­‰è™Ÿä¸æˆç«‹ï¼";
            
            // è¦–è¦ºç§»é™¤å·¦é‚Šçš„1
            const ones = document.querySelectorAll('#pan-left .block-1');
            ones.forEach(el => el.style.opacity = '0.2');
        }

        function correctMove() {
            document.getElementById('beam').className = 'balance-beam'; // å¹³è¡¡
            document.getElementById('balance-msg').innerText = "âœ… æ­£ç¢ºï¼å…©é‚ŠåŒæ™‚æ¸› 6ï¼Œå¤©å¹³ä¿æŒå¹³è¡¡ã€‚";
            document.getElementById('balance-msg').style.color = "var(--success)";

            // è¦–è¦ºç§»é™¤å…©é‚Š
            const l_ones = document.querySelectorAll('#pan-left .block-1');
            const r_ones = document.querySelectorAll('#pan-right .block-1');
            for(let i=0; i<6; i++) {
                if(l_ones[i]) l_ones[i].style.display = 'none';
                if(r_ones[i]) r_ones[i].style.display = 'none';
            }
            document.getElementById('eq-l').innerText = "2x";
            document.getElementById('eq-r').innerText = "4";
        }

        initBalance();

        // --- åˆ†æ•¸é‚è¼¯ ---
        function showFractionTrap() {
            const box = document.getElementById('frac-step');
            const msg = document.getElementById('frac-explanation');
            box.style.opacity = '1';
            
            document.getElementById('const-item').innerText = "+ 2";
            document.getElementById('const-item').style.background = "#ffcccc"; // ç´…è‰²è­¦ç¤º
            document.getElementById('const-item').style.borderColor = "red";
            
            msg.innerText = "ğŸ˜± æ…˜åŠ‡ç™¼ç”Ÿï¼šä½ å¿˜è¨˜æŠŠ 2 ä¹˜ä»¥ 3 äº†ï¼ç­”æ¡ˆå…¨éŒ¯ï¼";
            msg.style.color = "var(--danger)";
        }

        function showFractionCorrect() {
            const box = document.getElementById('frac-step');
            const msg = document.getElementById('frac-explanation');
            box.style.opacity = '1';
            
            // å‹•ç•«æ¼”ç¤º 2 è®Šæˆ 6
            document.getElementById('const-item').innerText = "+ 2";
            setTimeout(() => {
                document.getElementById('const-item').style.transition = "0.5s";
                document.getElementById('const-item').style.transform = "scale(1.2)";
                document.getElementById('const-item').innerText = "+ 6";
                document.getElementById('const-item').style.background = "#d4edda";
                document.getElementById('const-item').style.borderColor = "#28a745";
            }, 500);

            msg.innerText = "ğŸ‘ å®Œç¾ï¼æ¯ä¸€é …éƒ½è¦ä¹˜ä»¥ 3 (åŒ…æ‹¬å¸¸æ•¸é …)";
            msg.style.color = "var(--success)";
        }

        // --- æ‡‰ç”¨é¡Œé‚è¼¯ ---
        let currentSlot = 0;
        
        function fillSlot(idx, val) {
            // é€™è£¡æ”¹æˆè‡ªå‹•ä¾åºå¡«å…¥ï¼Œæˆ–æ˜¯æŒ‡å®šå¡«å…¥
            // ç°¡å–®ç‰ˆï¼šæ‰¾åˆ°ç¬¬ä¸€å€‹ç©ºæ ¼å¡«å…¥
            const slots = document.querySelectorAll('.slot');
            for(let s of slots) {
                if(!s.classList.contains('filled') && s.id !== '') {
                    s.innerText = val;
                    s.classList.add('filled');
                    return;
                }
            }
        }

        function manualFill(val) {
            fillSlot(0, val);
        }

        function clearSlot(idx) {
            const s = document.getElementById('slot-' + idx);
            s.innerText = '';
            s.classList.remove('filled');
            document.getElementById('math-check-msg').innerText = "";
        }

        function checkMath() {
            const s0 = document.getElementById('slot-0').innerText;
            const s1 = document.getElementById('slot-1').innerText;
            const s2 = document.getElementById('slot-2').innerText;
            const msg = document.getElementById('math-check-msg');

            // é æœŸï¼š y = 3x - 5
            if(s0 === '=' && s1 === '3x' && s2 === '-') {
                msg.innerText = "ğŸ‰ ç­”å°äº†ï¼ y = 3x - 5";
                msg.style.color = "var(--success)";
            } else if (s0 === '=' && s1 === '-' && s2 === '3x') {
                msg.innerText = "âš ï¸ é™·é˜±ï¼ã€Œæ¯” 3x å°‘ 5ã€æ„æ€æ˜¯ 3x è¦åœ¨å‰é¢è¢«æ¸›ï¼ (3x - 5)";
                msg.style.color = "var(--danger)";
            } else {
                msg.innerText = "ğŸ¤” å†è©¦è©¦çœ‹ï¼Ÿé †åºæ€ªæ€ªçš„å–”ã€‚";
                msg.style.color = "#f39c12";
            }
        }
    </script>
</body>
</html>