<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>ä¸ƒå¹´ç´šæ•¸å­¸ | æ–¹ç¨‹å¼å¯¦æˆ°å·¥å…·ç®± (Fix)</title>
    <style>
        :root { --primary: #2980b9; --danger: #c0392b; --success: #27ae60; --dark: #2c3e50; --bg: #ecf0f1; }
        body { font-family: 'Segoe UI', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; background: var(--bg); margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        
        .brand-watermark { position: fixed; bottom: 20px; right: 20px; background: rgba(26, 42, 108, 0.8); color: white; padding: 8px 15px; border-radius: 50px; font-size: 12px; pointer-events: none; z-index: 999; }
        .tabs { display: flex; width: 100%; background: white; padding: 15px 0; justify-content: center; gap: 15px; }
        .tab-btn { background: #f0f2f5; color: #7f8c8d; border: none; padding: 10px 25px; cursor: pointer; font-size: 1rem; border-radius: 50px; font-weight: bold; }
        .tab-btn.active { background: var(--dark); color: white; }
        .container { width: 90%; max-width: 900px; background: white; margin-top: 30px; border-radius: 20px; padding: 40px; display: none; }
        .container.active { display: block; }

        /* --- å¤©å¹³ä¿®å¾©æ ¸å¿ƒ --- */
        .balance-stage { 
            position: relative; 
            width: 100%; 
            height: 350px; /* åŠ é«˜é¿å…ç¢°åˆ°å­— */
            margin-top: 20px; 
            background: #fdfdfd; 
            border-bottom: 2px solid #eee;
            overflow: hidden; /* é˜²æ­¢æº¢å‡º */
        }
        
        /* 1. æ”¯é» (çµ•å°ç½®ä¸­) */
        .balance-pivot { 
            width: 0; height: 0; 
            border-left: 30px solid transparent; 
            border-right: 30px solid transparent; 
            border-bottom: 60px solid var(--dark); 
            position: absolute; 
            bottom: 0; 
            left: 50%; 
            transform: translateX(-50%); 
            z-index: 2; 
        }
        
        /* 2. æ©«æ¡¿ (çµ•å°å®šä½ï¼Œæ›åœ¨æ”¯é»ä¸Š) */
        .balance-beam { 
            width: 500px; 
            height: 12px; 
            background: var(--dark); 
            border-radius: 6px; 
            position: absolute; 
            bottom: 60px; /* å‰›å¥½å£“åœ¨æ”¯é»å°–ç«¯ */
            left: 50%; 
            margin-left: -250px; /* å¯¬åº¦çš„ä¸€åŠï¼Œç¢ºä¿æ­£ä¸­ */
            transition: transform 0.6s cubic-bezier(0.4, 2, 0.6, 1); /* å½ˆæ€§æ•ˆæœ */
            transform-origin: center center; /* æ—‹è½‰è»¸å¿ƒåœ¨æ­£ä¸­é–“ */
            z-index: 3;
        }

        /* 3. æ‰˜ç›¤ç·š (æ›åœ¨æ©«æ¡¿å…©ç«¯) */
        .string { width: 4px; height: 80px; background: #95a5a6; position: absolute; top: 0; }
        .string.left { left: 20px; }
        .string.right { right: 20px; }

        /* 4. æ‰˜ç›¤ (æ›åœ¨ç·šä¸‹é¢) */
        .pan { 
            width: 140px; height: 100px; 
            border: 4px solid var(--dark); border-top: none; 
            background: rgba(255,255,255,0.9);
            position: absolute; 
            bottom: -100px; 
            left: 50%; 
            transform: translateX(-50%);
            display: flex; flex-wrap: wrap-reverse; justify-content: center; align-content: flex-start;
            padding: 5px;
        }

        /* å‚¾æ–œç‹€æ…‹ */
        .tilt-left { transform: rotate(-15deg); }  /* å·¦é‚Šæ²‰ (é€†æ™‚é‡) */
        .tilt-right { transform: rotate(15deg); } /* å³é‚Šæ²‰ (é †æ™‚é‡) - ä¿®æ­£ä¹‹å‰èªªåçš„å•é¡Œ */

        /* ç©æœ¨æ¨£å¼ */
        .block-x { width: 35px; height: 35px; background: var(--danger); color: white; margin: 2px; display: flex; align-items: center; justify-content: center; font-weight: bold; border-radius: 4px; }
        .block-1 { width: 25px; height: 25px; background: var(--primary); color: white; margin: 2px; border-radius: 50%; font-size: 12px; display: flex; align-items: center; justify-content: center; }

        /* æ‡‰ç”¨é¡Œå€ */
        .word-problem-area { background: #f9f9f9; padding: 20px; border-radius: 10px; font-size: 1.3rem; border-left: 6px solid var(--success); }
        .keyword { border-bottom: 3px solid #ccc; cursor: pointer; padding: 0 5px; transition: 0.2s; }
        .keyword:hover { background: #e8f5e9; }
        .keyword.filled { background: var(--success); color: white; border-color: transparent; }
        
        .builder-area { margin-top: 20px; padding: 20px; background: var(--dark); border-radius: 10px; color: white; display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
        .slot { width: 50px; height: 40px; border: 2px dashed #7f8c8d; display: flex; align-items: center; justify-content: center; cursor: pointer; background: rgba(255,255,255,0.1); }
        .slot.filled { background: white; color: black; border-style: solid; }

        .btn-blue { background: var(--primary); color: white; padding: 10px 20px; border:none; border-radius:5px; cursor:pointer; }
        .btn-red { background: var(--danger); color: white; padding: 10px 20px; border:none; border-radius:5px; cursor:pointer; }
    </style>
</head>
<body>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('balance')">âš–ï¸ å¤©å¹³ (ä¿®å¾©ç‰ˆ)</button>
        <button class="tab-btn" onclick="switchTab('word')">ğŸ“ é¡Œæ„ç¿»è­¯æ©Ÿ</button>
    </div>

    <div id="balance" class="container active">
        <h2>ç­‰é‡å…¬ç†ï¼šå¤©å¹³å¹³è¡¡å¯¦é©—</h2>
        <div style="text-align:center; font-size:1.8rem; font-weight:bold; color:var(--dark);">
            <span id="eq-l">2x + 6</span> = <span id="eq-r">10</span>
        </div>

        <div class="balance-stage">
            <div class="balance-beam" id="beam">
                <div class="string left">
                    <div class="pan" id="pan-left"></div>
                </div>
                <div class="string right">
                    <div class="pan" id="pan-right"></div>
                </div>
            </div>
            <div class="balance-pivot"></div>
        </div>

        <div style="text-align:center; margin-top:20px;">
            <button class="btn-red" onclick="wrongMove()">âŒ éŒ¯èª¤ï¼šåªæ¸›å·¦é‚Š</button>
            <button class="btn-blue" onclick="correctMove()">â­• æ­£ç¢ºï¼šåŒæ™‚æ¸› 6</button>
            <button class="btn-blue" style="background:#f1c40f; color:#333;" onclick="initBalance()">ğŸ”„ é‡ç½®</button>
        </div>
        <p id="balance-msg" style="text-align:center; color:var(--danger); font-weight:bold; min-height:20px;"></p>
    </div>

    <div id="word" class="container">
        <h2>é¡Œæ„ç¿»è­¯æ©Ÿ</h2>
        <div class="word-problem-area">
            é¡Œç›®ï¼šçˆ¸çˆ¸çš„å¹´é½¡ <span class="keyword" onclick="fillSlot(0, '=')">æ˜¯</span> 
            å…’å­çš„ <span class="keyword" onclick="fillSlot(1, '3x')">3å€</span> 
            <span class="keyword" onclick="fillSlot(2, '-')">å°‘</span> 5 æ­²ã€‚
            <br><span style="font-size:0.9rem;">(è¨­å…’å­ç‚º xï¼Œçˆ¸çˆ¸ç‚º y)</span>
        </div>
        <div class="builder-area">
            <span>y</span>
            <div class="slot" id="slot-0" onclick="clearSlot(0)"></div>
            <div class="slot" id="slot-1" onclick="clearSlot(1)"></div>
            <div class="slot" id="slot-2" onclick="clearSlot(2)"></div>
            <div class="slot filled" style="border:none;">5</div>
        </div>
        <div style="margin-top:10px;">
            <button class="btn-blue" onclick="manualFill('+')">+</button>
            <button class="btn-blue" onclick="manualFill('-')">-</button>
            <button class="btn-blue" onclick="manualFill('=')">=</button>
            <button class="btn-blue" onclick="manualFill('3x')">3x</button>
            <button class="btn-blue" style="background:var(--success)" onclick="checkMath()">æª¢æŸ¥</button>
        </div>
        <p id="math-msg" style="font-weight:bold; font-size:1.2rem;"></p>
    </div>

    <div class="brand-watermark">STEM INSIGHT</div>

    <script>
        function switchTab(id) {
            document.querySelectorAll('.container').forEach(el => el.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            event.target.classList.add('active');
        }

        // --- å¤©å¹³é‚è¼¯ ---
        function initBalance() {
            const l = document.getElementById('pan-left');
            const r = document.getElementById('pan-right');
            l.innerHTML = ''; r.innerHTML = '';
            for(let i=0; i<2; i++) l.innerHTML += `<div class="block-x">X</div>`;
            for(let i=0; i<6; i++) l.innerHTML += `<div class="block-1">1</div>`;
            for(let i=0; i<10; i++) r.innerHTML += `<div class="block-1">1</div>`;
            
            document.getElementById('beam').className = 'balance-beam';
            document.getElementById('balance-msg').innerText = "";
            document.getElementById('eq-l').innerText = "2x + 6";
            document.getElementById('eq-r').innerText = "10";
        }

        function wrongMove() {
            // åªæ¸›å·¦é‚Š -> å·¦é‚Šè®Šè¼• -> å·¦é‚Šç¿¹èµ·ä¾† (é€†æ™‚é‡ tilt-left)
            // ç­‰ç­‰ï¼Œå·¦é‚Šè®Šè¼•æ‡‰è©²æ˜¯å¾€ä¸Šç¿¹ï¼Œä¹Ÿå°±æ˜¯å³é‚Šæ²‰ä¸‹å» (é †æ™‚é‡ tilt-right)
            // ä¿®æ­£ç‰©ç†é‚è¼¯ï¼šå·¦ç›¤æ‹¿èµ°æ±è¥¿ -> å·¦ç›¤è¼• -> å·¦ç›¤ä¸Šæµ® -> å³ç›¤ä¸‹æ²‰ -> æ©«æ¡¿é †æ™‚é‡æ—‹è½‰
            document.getElementById('beam').className = 'balance-beam tilt-right'; 
            document.getElementById('balance-msg').innerText = "âš ï¸ éŒ¯èª¤ï¼åªæ‹¿å·¦é‚Šï¼Œå·¦é‚Šè®Šè¼•ç¿¹èµ·ä¾†äº†ï¼(ç­‰è™Ÿä¸æˆç«‹)";
            
            // è¦–è¦ºç§»é™¤
            document.querySelectorAll('#pan-left .block-1').forEach(el => el.style.opacity = '0.2');
        }

        function correctMove() {
            document.getElementById('beam').className = 'balance-beam';
            document.getElementById('balance-msg').innerText = "âœ… æ­£ç¢ºï¼å…©é‚ŠåŒæ™‚æ‹¿æ‰ï¼Œä¿æŒå¹³è¡¡ã€‚";
            document.getElementById('balance-msg').style.color = "var(--success)";
            
            // ç§»é™¤å…©é‚Š
            const l = document.querySelectorAll('#pan-left .block-1');
            const r = document.querySelectorAll('#pan-right .block-1');
            for(let i=0; i<6; i++) {
                if(l[i]) l[i].style.display = 'none';
                if(r[i]) r[i].style.display = 'none';
            }
            document.getElementById('eq-l').innerText = "2x";
            document.getElementById('eq-r').innerText = "4";
        }
        initBalance();

        // --- æ‡‰ç”¨é¡Œé‚è¼¯ ---
        function fillSlot(idx, val) {
            // è‡ªå‹•æ‰¾ç©ºæ ¼
            for(let i=0; i<3; i++) {
                let s = document.getElementById('slot-'+i);
                if(!s.classList.contains('filled')) {
                    s.innerText = val;
                    s.classList.add('filled');
                    return;
                }
            }
        }
        function manualFill(val) { fillSlot(0, val); }
        function clearSlot(idx) {
            let s = document.getElementById('slot-'+idx);
            s.innerText = ''; s.classList.remove('filled');
            document.getElementById('math-msg').innerText = "";
        }
        function checkMath() {
            const s0 = document.getElementById('slot-0').innerText;
            const s1 = document.getElementById('slot-1').innerText;
            const s2 = document.getElementById('slot-2').innerText;
            if(s0 === '=' && s1 === '3x' && s2 === '-') {
                document.getElementById('math-msg').innerText = "ğŸ‰ æ­£ç¢ºï¼ y = 3x - 5";
                document.getElementById('math-msg').style.color = "var(--success)";
            } else {
                document.getElementById('math-msg').innerText = "âŒ å†æƒ³æƒ³ï¼Œã€Œå°‘ã€5 æ­²æ‡‰è©²æ˜¯èª°æ¸›èª°ï¼Ÿ";
                document.getElementById('math-msg').style.color = "var(--danger)";
            }
        }
    </script>
</body>
</html>