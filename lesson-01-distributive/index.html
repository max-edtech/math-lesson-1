<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L01: åˆ†é…å¾‹åœ–åƒåŒ– | STEM INSIGHT</title>
    <link rel="stylesheet" href="../../assets/css/dashboard.css">
    <style>
        /* è¦†è“‹ç‚ºæ•¸å­¸å°ˆå±¬é¢¨æ ¼ (è—è‰²ç³») */
        body { background: #f4f6f8; background-image: none; color: #333; }
        .container { max-width: 800px; margin-top: 30px; }
        .lesson-nav { padding: 15px; background: white; border-radius: 12px; margin-bottom: 20px; display: flex; justify-content: space-between; }
        .back-link { text-decoration: none; color: #2980b9; font-weight: bold; }
        
        #app-container {
            background: white; padding: 40px; border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            border-top: 5px solid #3498db; /* æ•¸å­¸è— */
        }
        
        .action-btn { 
            display: block; width: 100%; padding: 12px; background: #3498db; 
            color: white; border: none; border-radius: 8px; cursor: pointer; 
            font-size: 1rem; margin-top: 10px;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="lesson-nav">
            <a href="../../index.html" class="back-link">â¬… å›åˆ°æˆ°æƒ…å®¤</a>
            <div style="font-weight: bold; color: #2980b9;">LESSON 01: MATH</div>
        </div>

        <div id="app-container"></div>

        <div style="margin-top: 20px; text-align: right;">
            <button id="next-step-btn" class="action-btn" style="width: auto;">ä¸‹ä¸€æ­¥ â¡</button>
        </div>
    </div>

    <script>
        const lessonData = {
            id: "math_01_distributive",
            title: "åˆ†é…å¾‹åœ–åƒåŒ–",
            steps: [
                {
                    type: "intro",
                    title: "è§€å¿µå°å…¥ï¼šéº¥ç•¶å‹å¥—é¤",
                    content: "<p>åˆ†é…å¾‹å¸¸å¸¸è®“åŒå­¸ææ··ï¼Œæˆ‘å€‘ç”¨è²·å¥—é¤çš„æ¦‚å¿µä¾†æƒ³ã€‚</p><p>å‡è¨­ä¸€ä»½å¥—é¤æœ‰ï¼š(ğŸ” æ¼¢å ¡ + ğŸŸ è–¯æ¢)</p>"
                },
                {
                    type: "visual_concept",
                    title: "åœ–åƒæ‹†è§£",
                    icon: "ğŸ”ğŸŸ x 3",
                    description: "å¦‚æœä½ è²·äº† <strong>3</strong> ä»½å¥—é¤ï¼Œé‚£å°±æ˜¯ï¼š<br>3 Ã— (ğŸ” + ğŸŸ) = <strong>3å€‹ğŸ” + 3å€‹ğŸŸ</strong><br>é€™å°±æ˜¯åˆ†é…å¾‹ï¼šå¤–é¢çš„æ•¸å­—è¦ä¹˜çµ¦è£¡é¢çš„æ¯ä¸€å€‹ï¼"
                },
                {
                    type: "step_solver",
                    title: "ç‰›åˆ€å°è©¦",
                    question: "è«‹åˆ©ç”¨åˆ†é…å¾‹è¨ˆç®—ï¼š 5 Ã— (100 + 2)",
                    prefix: "ç­”æ¡ˆï¼š",
                    answer: "510",
                    hint: "è®Šæˆ 5x100 + 5x2 = 500 + 10"
                },
                {
                    type: "interactive_quiz",
                    title: "è§€å¿µæª¢æ¸¬",
                    question: "ä¸‹åˆ—å“ªä¸€å€‹å¼å­æ˜¯éŒ¯èª¤çš„ï¼Ÿ",
                    options: [
                        "2(a+b) = 2a + 2b",
                        "3(x-y) = 3x - 3y",
                        "-(a-b) = -a - b" // éŒ¯èª¤é¸é …
                    ],
                    correctIdx: 2
                }
            ]
        };
    </script>

    <script src="../../assets/js/renderers/math-renderer.js"></script>

    <script>
        let currentStepIndex = 0;
        const container = document.getElementById('app-container');
        const nextBtn = document.getElementById('next-step-btn');

        function loadStep(index) {
            if (index >= lessonData.steps.length) {
                alert("å–®å…ƒå®Œæˆï¼");
                return;
            }
            MathRenderer.renderStep(lessonData.steps[index], container);
            
            if (index === lessonData.steps.length - 1) {
                nextBtn.innerText = "å®Œæˆèª²ç¨‹ âœ…";
                nextBtn.style.background = "#27ae60";
            }
        }

        nextBtn.onclick = () => {
            currentStepIndex++;
            if(currentStepIndex < lessonData.steps.length) {
                loadStep(currentStepIndex);
            }
        };

        loadStep(0);
    </script>
</body>
</html>