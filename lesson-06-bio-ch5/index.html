<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>ç”Ÿç‰© Ch5 å”èª¿ä½œç”¨ (Fix)</title>
    <style>
        :root { --primary: #2c3e50; --accent: #27ae60; --hormone: #e74c3c; }
        body { font-family: 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; background: #f4f7f6; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        
        .nav-bar { background: var(--primary); padding: 15px; display: flex; justify-content: center; gap: 10px; }
        .nav-btn { padding: 8px 15px; cursor: pointer; border: none; background: rgba(255,255,255,0.1); color: white; border-radius: 50px; transition: 0.3s; }
        .nav-btn.active { background: var(--accent); transform: scale(1.1); }
        
        .scene { display: none; height: 100%; padding: 20px; flex-direction: column; align-items: center; }
        .scene.active { display: flex; }
        .desc-box { background: white; padding: 20px; border-radius: 10px; margin-top: 20px; max-width: 600px; width: 90%; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }

        /* æ¤ç‰©æ¨£å¼ (ä¿®å¾©ç‰ˆ) */
        .plant-stage { position: relative; width: 100%; height: 300px; background: #fffcf5; border: 2px solid #ddd; border-radius: 10px; overflow: hidden; }
        
        /* å€’æ”¾å¯¦é©—çµ„ä»¶ */
        .geo-setup { position: absolute; top: 40%; left: 30%; width: 200px; height: 100px; transition: 1s; display: none; }
        
        .seed { width: 30px; height: 30px; background: #5d4037; border-radius: 50%; position: absolute; left: 0; top: 0; z-index: 5; }
        
        /* è–ï¼šå‘å³ç”Ÿé•· */
        .stem-part { 
            position: absolute; left: 15px; top: 5px; 
            width: 100px; height: 20px; 
            background: #27ae60; 
            transform-origin: left center; 
            transition: 2s; 
            border-radius: 0 10px 10px 0;
        }
        
        /* æ ¹ï¼šå‘å·¦ç”Ÿé•· (åˆå§‹ç‹€æ…‹) */
        .root-part { 
            position: absolute; left: 15px; top: 5px; 
            width: 100px; height: 10px; 
            background: #d7ccc8; 
            transform-origin: left center; 
            transform: rotate(180deg); /* è½‰åˆ°å·¦é‚Š */
            transition: 2s; 
            border-radius: 0 10px 10px 0;
            z-index: 4;
        }

        /* å«ç¾è‰æ¨£å¼ */
        .mimosa-setup { position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); display: none; }
        .mimosa-stem { width: 4px; height: 150px; background: #2e7d32; margin: 0 auto; }
        .leaf-group { position: absolute; top: 20px; left: -40px; cursor: pointer; }
        .leaf-blade { width: 50px; height: 20px; background: #4caf50; border-radius: 20px 0; display: inline-block; transition: 0.2s; }
        .leaf-blade.right { border-radius: 0 20px; margin-left: -5px; }

        .brand-watermark { position: fixed; bottom: 20px; right: 20px; background: rgba(26, 42, 108, 0.8); color: white; padding: 8px 15px; border-radius: 50px; font-size: 12px; pointer-events: none; }
    </style>
</head>
<body>

    <div class="nav-bar">
        <button class="nav-btn active" onclick="switchScene(0)">ğŸŒ¿ æ¤ç‰©æ„Ÿæ‡‰ (ä¿®å¾©ç‰ˆ)</button>
        </div>

    <div class="scene active" id="scene-0">
        <h3>ğŸŒ¿ æ¤ç‰©æ„Ÿæ‡‰ï¼šç”Ÿé•·ç´  vs è†¨å£“</h3>
        <div class="plant-stage">
            <div id="geo-setup" class="geo-setup">
                <div class="seed"></div>
                <div id="stem" class="stem-part">
                    <span style="position:absolute; right:-40px; top:0; font-size:12px; color:#27ae60;">è–</span>
                </div>
                <div id="root" class="root-part">
                     <span style="position:absolute; right:-40px; top:0; font-size:12px; color:#8d6e63; transform: rotate(180deg);">æ ¹</span>
                </div>
            </div>

            <div id="mimosa-setup" class="mimosa-setup">
                <div class="mimosa-stem"></div>
                <div class="leaf-group" onclick="triggerMimosa()">
                    <div id="leaf-l" class="leaf-blade"></div>
                    <div id="leaf-r" class="leaf-blade right"></div>
                </div>
            </div>
        </div>

        <div class="desc-box">
            <button onclick="setMode('geo')">ğŸŒ å‘åœ°æ€§å¯¦é©—</button>
            <button onclick="setMode('thigmo')">ğŸ–ï¸ å«ç¾è‰å¯¦é©—</button>
            <button onclick="resetPlant()">ğŸ”„ é‡ç½®</button>
            <p id="plant-log" style="text-align:left; font-size:0.9rem; margin-top:15px;"></p>
        </div>
    </div>

    <div class="brand-watermark">STEM INSIGHT</div>

    <script>
        function setMode(mode) {
            resetPlant();
            if(mode === 'geo') {
                document.getElementById('geo-setup').style.display = 'block';
                document.getElementById('mimosa-setup').style.display = 'none';
                document.getElementById('plant-log').innerHTML = "æ¤ç‰©æ°´å¹³æ”¾ç½®ä¸­...<br>ç­‰å¾…ç”Ÿé•·ç´ ä½œç”¨...";
                
                setTimeout(() => {
                    // é—œéµä¿®æ­£ï¼šè–å¾€ä¸Š(-45deg)ï¼Œæ ¹å¾€ä¸‹(+180+45 = 225deg)
                    document.getElementById('stem').style.transform = 'rotate(-45deg)';
                    document.getElementById('stem').style.borderRadius = '0 0 50px 0'; // ä¸‹é¢é•·å¾—å¿«
                    
                    document.getElementById('root').style.transform = 'rotate(225deg)'; // 180(å‘å·¦) + 45(å‘ä¸‹å½)
                    document.getElementById('root').style.borderRadius = '0 50px 0 0'; // ä¸Šé¢é•·å¾—å¿«(ä¸‹é¢è¢«æŠ‘åˆ¶)
                    
                    document.getElementById('plant-log').innerHTML = `
                        <b>çµæœï¼š</b><br>
                        1. è– (èƒŒåœ°æ€§)ï¼šç”Ÿé•·ç´ æ²ˆåœ¨ä¸‹é¢ â†’ é•·å¾—å¿« â†’ <b>å‘ä¸Šå½</b>ã€‚<br>
                        2. æ ¹ (å‘åœ°æ€§)ï¼šç”Ÿé•·ç´ æ²ˆåœ¨ä¸‹é¢ â†’ æ¿ƒåº¦å¤ªé«˜è¢«æŠ‘åˆ¶ â†’ <b>å‘ä¸‹å½</b>ã€‚
                    `;
                }, 1000);

            } else {
                document.getElementById('geo-setup').style.display = 'none';
                document.getElementById('mimosa-setup').style.display = 'block';
                document.getElementById('plant-log').innerHTML = "é»æ“Šå«ç¾è‰è‘‰å­ï¼Œè§€å¯Ÿ<b>è†¨å£“</b>è®ŠåŒ–ã€‚";
            }
        }

        function triggerMimosa() {
            document.getElementById('leaf-l').style.transform = 'rotate(30deg) scaleX(0.5)';
            document.getElementById('leaf-r').style.transform = 'rotate(-30deg) scaleX(0.5)';
            document.getElementById('plant-log').innerHTML = "<b>é–‰åˆï¼</b><br>é€™æ˜¯æ°´åˆ†æµå¤±é€ æˆçš„ï¼Œé€Ÿåº¦å¿«ï¼Œèˆ‡ç”Ÿé•·ç„¡é—œã€‚";
        }

        function resetPlant() {
            // é‡ç½®æ¨£å¼
            document.getElementById('stem').style.transform = 'rotate(0deg)';
            document.getElementById('stem').style.borderRadius = '0 10px 10px 0';
            document.getElementById('root').style.transform = 'rotate(180deg)';
            document.getElementById('root').style.borderRadius = '0 10px 10px 0';
            
            document.getElementById('leaf-l').style.transform = 'none';
            document.getElementById('leaf-r').style.transform = 'none';
            document.getElementById('plant-log').innerText = "";
        }
    </script>
</body>
</html>