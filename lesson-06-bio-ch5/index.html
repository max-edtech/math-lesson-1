<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>Ch5 å”èª¿ä½œç”¨æˆ°æƒ…ä¸­å¿ƒ | STEM INSIGHT</title>
    <style>
        :root { --primary: #2c3e50; --accent: #27ae60; --nerve: #f1c40f; --hormone: #e74c3c; }
        body { font-family: 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; background: #f4f7f6; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        
        /* é ‚éƒ¨å°èˆª */
        .nav-bar { background: var(--primary); padding: 15px; display: flex; justify-content: center; gap: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .nav-btn { padding: 10px 25px; cursor: pointer; border: none; background: rgba(255,255,255,0.1); color: white; border-radius: 50px; font-weight: bold; transition: 0.3s; }
        .nav-btn.active { background: var(--accent); transform: scale(1.1); }
        .nav-btn:hover { background: rgba(255,255,255,0.3); }

        /* å…§å®¹å€ */
        .content { flex: 1; position: relative; overflow: hidden; }
        .scene { display: none; height: 100%; padding: 20px; box-sizing: border-box; flex-direction: column; align-items: center; justify-content: center; animation: fadeIn 0.5s; }
        .scene.active { display: flex; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Scene 1: ç¥ç¶“ç³»çµ± (åå°„è·¯å¾‘) --- */
        .pathway-container { display: flex; align-items: center; gap: 10px; margin-top: 20px; }
        .node { width: 80px; height: 80px; background: white; border: 3px solid var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.1); z-index: 2; text-align: center; font-size: 14px; }
        .arrow { font-size: 2rem; color: #ccc; transition: 0.3s; }
        
        .signal { position: absolute; width: 20px; height: 20px; background: var(--nerve); border-radius: 50%; top: 30px; left: 30px; display: none; box-shadow: 0 0 10px var(--nerve); z-index: 3; }
        
        /* å‹•ç•«é¡åˆ¥ */
        .activate { border-color: var(--nerve); background: #fffbe6; transform: scale(1.1); transition: 0.2s; }
        .path-active { color: var(--nerve); }

        /* --- Scene 2: å…§åˆ†æ³Œ (è¡€ç³–) --- */
        .chart-container { width: 80%; height: 300px; background: white; border-radius: 15px; position: relative; border-left: 2px solid #333; border-bottom: 2px solid #333; margin-top: 20px; }
        .sugar-level { position: absolute; left: 0; bottom: 50%; width: 100%; height: 4px; background: #eee; }
        .current-level { position: absolute; left: 0; width: 20px; height: 20px; background: var(--hormone); border-radius: 50%; bottom: 50%; transition: bottom 1s cubic-bezier(0.4, 0, 0.2, 1), left 5s linear; }
        .organ-btn { margin: 5px; padding: 10px; background: white; border: 2px solid var(--hormone); border-radius: 10px; cursor: pointer; }
        .organ-btn:hover { background: #ffebee; }

        /* --- Scene 3: æ¤ç‰©æ„Ÿæ‡‰ --- */
        .plant-stage { width: 300px; height: 400px; position: relative; border-bottom: 10px solid #795548; }
        .stem { width: 20px; height: 300px; background: var(--accent); position: absolute; bottom: 0; left: 140px; border-radius: 10px 10px 0 0; transform-origin: bottom center; transition: 1s; }
        .leaf { width: 60px; height: 30px; background: var(--accent); border-radius: 30px 0 30px 0; position: absolute; }
        .sun { width: 60px; height: 60px; background: #f1c40f; border-radius: 50%; position: absolute; top: 20px; cursor: pointer; transition: 0.5s; box-shadow: 0 0 20px #f1c40f; }
        
        .auxin-dots { position: absolute; width: 4px; height: 4px; background: #2c3e50; border-radius: 50%; }

        .brand-watermark { position: fixed; bottom: 20px; right: 20px; background: rgba(26, 42, 108, 0.8); color: white; padding: 8px 15px; border-radius: 50px; font-size: 12px; pointer-events: none; }
        
        h2 { color: #1a2a6c; border-bottom: 3px solid var(--accent); padding-bottom: 5px; }
        .desc-box { background: white; padding: 15px; border-radius: 10px; margin-top: 20px; max-width: 600px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
    </style>
</head>
<body>

    <div class="nav-bar">
        <button class="nav-btn active" onclick="switchScene(0)">âš¡ ç¥ç¶“ç³»çµ± (5-2)</button>
        <button class="nav-btn" onclick="switchScene(1)">ğŸ©¸ å…§åˆ†æ³Œ (5-3)</button>
        <button class="nav-btn" onclick="switchScene(2)">ğŸŒ¿ æ¤ç‰©æ„Ÿæ‡‰ (5-4)</button>
    </div>

    <div class="content">
        <div class="scene active" id="scene-0">
            <h2>ğŸ§  åˆºæ¿€èˆ‡åæ‡‰è·¯å¾‘æ¨¡æ“¬</h2>
            <div class="pathway-container">
                <div class="node" id="n1">å—å™¨<br>(çš®è†š)</div> <div class="arrow">âœ</div>
                <div class="node" id="n2">æ„Ÿè¦º<br>ç¥ç¶“</div> <div class="arrow">âœ</div>
                <div class="node" id="n3" style="border-color: #e74c3c">ä¸­æ¨<br>(è…¦/è„Šé«“)</div> <div class="arrow">âœ</div>
                <div class="node" id="n4">é‹å‹•<br>ç¥ç¶“</div> <div class="arrow">âœ</div>
                <div class="node" id="n5">å‹•å™¨<br>(è‚Œè‚‰)</div>
            </div>
            <div class="desc-box">
                <p id="neuro-log">é»æ“Šä¸‹æ–¹æŒ‰éˆ•ï¼Œè§€å¯Ÿè¨Šæ¯å¦‚ä½•å‚³éï¼</p>
                <button class="organ-btn" onclick="triggerReflex()">ğŸ”¥ æ‘¸åˆ°ç†±é‹ (è„Šé«“åå°„)</button>
                <button class="organ-btn" onclick="triggerConscious()">ğŸ¦Ÿ çœ‹åˆ°èšŠå­ (å¤§è…¦æ„è­˜)</button>
            </div>
        </div>

        <div class="scene" id="scene-1">
            <h2>ğŸ© è¡€ç³–æ†å®šæ©Ÿåˆ¶ (èƒ°å³¶ç´  vs å‡ç³–ç´ )</h2>
            <div class="chart-container">
                <div style="position: absolute; top: 10px; left: 10px; color: #aaa;">è¡€ç³–æ¿ƒåº¦ High</div>
                <div style="position: absolute; bottom: 10px; left: 10px; color: #aaa;">è¡€ç³–æ¿ƒåº¦ Low</div>
                <div class="sugar-level" style="border-top: 1px dashed #ccc;"></div> <div class="current-level" id="glucose-ball"></div>
            </div>
            <div class="desc-box">
                <p>ç›®å‰ç‹€æ…‹ï¼š<span id="sugar-status" style="font-weight:bold;">æ­£å¸¸</span></p>
                <button class="organ-btn" onclick="eatMeal()">ğŸ± åƒå¤§é¤ (è¡€ç³–â†‘)</button>
                <button class="organ-btn" onclick="exercise()">ğŸƒ åŠ‡çƒˆé‹å‹• (è¡€ç³–â†“)</button>
                <br>
                <span style="font-size: 0.8rem; color: #666;">è§€å¯Ÿèƒ°å³¶ç´ (é™)èˆ‡å‡ç³–ç´ (å‡)å¦‚ä½•é‹ä½œ</span>
            </div>
        </div>

        <div class="scene" id="scene-2">
            <h2>ğŸŒ» å‘å…‰æ€§å¯¦é©— (ç”Ÿé•·ç´ ä¸å‡)</h2>
            <div class="plant-stage">
                <div class="sun" id="sun" style="left: 120px;"></div>
                <div class="stem" id="stem">
                    <div class="leaf" style="top:50px; left: -60px;"></div>
                    <div class="leaf" style="top:120px; right: -60px;"></div>
                </div>
            </div>
            <div class="desc-box">
                <button class="organ-btn" onclick="moveSun('left')">â¬…ï¸ ç§»åˆ°å·¦é‚Š</button>
                <button class="organ-btn" onclick="moveSun('center')">â¬†ï¸ ç§»åˆ°é ­é ‚</button>
                <button class="organ-btn" onclick="moveSun('right')">â¡ï¸ ç§»åˆ°å³é‚Š</button>
                <p>ç”Ÿé•·ç´ æ€•å…‰ï¼Œæœƒèº²åˆ°èƒŒå…‰é¢ï¼Œå°è‡´èƒŒå…‰é¢é•·å¾—å¿«ï¼</p>
            </div>
        </div>
    </div>

    <div class="brand-watermark">STEM INSIGHT</div>

    <script>
        // åˆ‡æ›å ´æ™¯
        function switchScene(index) {
            document.querySelectorAll('.scene').forEach((el, i) => {
                el.classList.toggle('active', i === index);
            });
            document.querySelectorAll('.nav-btn').forEach((el, i) => {
                el.classList.toggle('active', i === index);
            });
        }

        // --- ç¥ç¶“ç³»çµ±é‚è¼¯ ---
        function triggerReflex() {
            runPathway("åå°„å‹•ä½œï¼šä¸ç¶“éå¤§è…¦ï¼Œé€Ÿåº¦å¿«ï¼", 500); // è„Šé«“åå°„å¿«
        }
        function triggerConscious() {
            runPathway("æ„è­˜å‹•ä½œï¼šå‚³åˆ°å¤§è…¦åˆ¤æ–·ï¼Œå†å‚³å‡ºä¾†ï¼Œé€Ÿåº¦è¼ƒæ…¢ã€‚", 1000); // å¤§è…¦è™•ç†æ…¢
        }

        async function runPathway(msg, speed) {
            const nodes = ['n1', 'n2', 'n3', 'n4', 'n5'];
            document.getElementById('neuro-log').innerText = msg;
            
            // é‡ç½®
            nodes.forEach(id => document.getElementById(id).classList.remove('activate'));
            
            for (let i = 0; i < nodes.length; i++) {
                let node = document.getElementById(nodes[i]);
                node.classList.add('activate');
                await new Promise(r => setTimeout(r, speed / 5)); // æ¨¡æ“¬å‚³å°æ™‚é–“
                node.classList.remove('activate');
            }
            document.getElementById('n5').classList.add('activate'); // å‹•å™¨æœ€å¾Œäº®ä¸€ä¸‹
        }

        // --- å…§åˆ†æ³Œé‚è¼¯ ---
        let sugarY = 50; // %
        const ball = document.getElementById('glucose-ball');
        const status = document.getElementById('sugar-status');

        function updateBall() {
            ball.style.bottom = sugarY + "%";
            if(sugarY > 60) {
                status.innerText = "éé«˜ï¼èƒ°å³¶ç´ åˆ†æ³Œä¸­... (å°‡ç³–è½‰ç‚ºè‚ç³–)";
                status.style.color = "#e74c3c";
                setTimeout(() => { sugarY = 50; updateBall(); }, 2000); // è‡ªå‹•å›ç©©
            } else if (sugarY < 40) {
                status.innerText = "éä½ï¼å‡ç³–ç´ /è…ä¸Šè…ºç´ åˆ†æ³Œä¸­... (åˆ†è§£è‚ç³–)";
                status.style.color = "#2980b9";
                setTimeout(() => { sugarY = 50; updateBall(); }, 2000); // è‡ªå‹•å›ç©©
            } else {
                status.innerText = "æ­£å¸¸ (æ†å®šç‹€æ…‹)";
                status.style.color = "#27ae60";
            }
        }

        function eatMeal() { sugarY = 85; updateBall(); }
        function exercise() { sugarY = 20; updateBall(); }

        // --- æ¤ç‰©æ„Ÿæ‡‰é‚è¼¯ ---
        function moveSun(pos) {
            const sun = document.getElementById('sun');
            const stem = document.getElementById('stem');
            
            if(pos === 'left') {
                sun.style.left = '20px';
                stem.style.transform = 'rotate(-15deg)'; // å‘å·¦å½
            } else if (pos === 'right') {
                sun.style.left = '220px';
                stem.style.transform = 'rotate(15deg)'; // å‘å³å½
            } else {
                sun.style.left = '120px';
                stem.style.transform = 'rotate(0deg)'; // ç›´ç«‹
            }
        }
    </script>
</body>
</html>