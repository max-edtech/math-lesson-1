<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>ç†åŒ–å¯¦é©—å®¤ (å«é™·é˜±é˜²ç¦¦) | STEM INSIGHT</title>
    <style>
        :root { --primary: #1a2a6c; --secondary: #b21f1f; --accent: #fdbb2d; --trap: #c0392b; }
        body { font-family: 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; background: #f0f2f5; margin: 0; display: flex; flex-direction: column; align-items: center; }
        
        header { width: 100%; background: var(--primary); color: white; padding: 15px 0; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); position: relative; }
        .brand-watermark { position: fixed; bottom: 20px; right: 20px; background: rgba(26, 42, 108, 0.8); color: white; padding: 8px 15px; border-radius: 50px; font-size: 12px; pointer-events: none; z-index: 100; }

        /* TAB åˆ‡æ› */
        .tabs { display: flex; gap: 20px; margin: 20px 0; }
        .tab-btn { padding: 10px 25px; border: none; background: white; border-radius: 20px; cursor: pointer; font-weight: bold; color: #555; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: 0.3s; }
        .tab-btn.active { background: var(--secondary); color: white; transform: scale(1.05); }

        .lab-container { width: 90%; max-width: 800px; background: white; border-radius: 15px; padding: 30px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); display: none; position: relative; }
        .lab-container.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* é™·é˜±æŒ‰éˆ• */
        .trap-btn { position: absolute; top: 20px; right: 20px; background: var(--trap); color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-weight: bold; box-shadow: 0 4px 0 #96281b; transition: 0.1s; animation: pulse 2s infinite; }
        .trap-btn:active { transform: translateY(4px); box-shadow: none; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* é™·é˜±å½ˆçª— (Modal) */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 200; align-items: center; justify-content: center; }
        .modal-box { background: white; width: 90%; max-width: 500px; padding: 30px; border-radius: 15px; text-align: center; border: 5px solid var(--trap); position: relative; }
        .modal-box h3 { color: var(--trap); font-size: 1.8rem; margin-top: 0; }
        .modal-close { position: absolute; top: 10px; right: 15px; font-size: 2rem; cursor: pointer; color: #aaa; }
        .trap-visual { background: #eee; height: 150px; margin: 20px 0; display: flex; align-items: center; justify-content: center; border-radius: 10px; position: relative; overflow: hidden; }

        /* --- åŸå­å¯¦é©—å®¤æ¨£å¼ --- */
        .atom-stage { position: relative; width: 300px; height: 300px; margin: 20px auto; }
        .nucleus { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 60px; height: 60px; background: radial-gradient(circle, #ff6b6b, #c0392b); border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; font-weight: bold; z-index: 10; font-size: 12px; }
        .orbit { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); border: 1px dashed #ccc; border-radius: 50%; }
        .orbit-1 { width: 140px; height: 140px; }
        .orbit-2 { width: 220px; height: 220px; }
        .electron { position: absolute; width: 12px; height: 12px; background: #3498db; border-radius: 50%; transition: 0.5s; }
        .control-panel { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 20px; }
        .panel-box { background: #f8f9fa; padding: 10px; border-radius: 10px; border: 1px solid #eee; text-align: center; }
        
        /* --- æ¯”ç†±å¯¦é©—å®¤æ¨£å¼ --- */
        .heat-stage { display: flex; justify-content: space-around; align-items: flex-end; height: 200px; margin-bottom: 20px; border-bottom: 5px solid #555; }
        .beaker { width: 80px; height: 120px; border: 3px solid #333; border-top: none; position: relative; background: rgba(255,255,255,0.5); }
        .liquid { width: 100%; height: 60%; position: absolute; bottom: 0; transition: height 0.5s; }
        .thermometer { position: absolute; right: -8px; bottom: 0; width: 6px; height: 100px; background: #ddd; }
        .mercury { position: absolute; bottom: 0; width: 100%; background: #e74c3c; height: 20%; transition: height 0.5s; }

        /* é™·é˜±ç‰¹æ•ˆç”¨ */
        .balance-bar { width: 80%; height: 20px; background: #eee; margin: 10px auto; border-radius: 10px; overflow: hidden; position: relative; }
        .bar-fill { height: 100%; background: #e74c3c; width: 0%; transition: 1s; }
    </style>
</head>
<body>

<header>
    <h2>STEM INSIGHT | åœ‹äºŒç†åŒ– (é™·é˜±é˜²ç¦¦ç‰ˆ)</h2>
</header>

<div class="tabs">
    <button class="tab-btn active" onclick="switchTab('atom')">âš›ï¸ åŸå­çµæ§‹</button>
    <button class="tab-btn" onclick="switchTab('heat')">ğŸ”¥ æ¯”ç†±èˆ‡ç†±å¹³è¡¡</button>
</div>

<div id="atom" class="lab-container active">
    <button class="trap-btn" onclick="showTrap('isotope')">âš ï¸ é–‹å•Ÿé™·é˜±é¡Œï¼šåŒä½ç´ </button>
    
    <div class="atom-stage">
        <div class="orbit orbit-2"></div>
        <div class="orbit orbit-1"></div>
        <div class="nucleus">
            <span id="p-disp">P:6</span>
            <span id="n-disp">N:6</span>
        </div>
        <div id="electrons-container"></div>
    </div>

    <div class="control-panel">
        <div class="panel-box">
            <label>è³ªå­ (P)</label><br>
            <button onclick="updateAtom('p', -1)">-</button> <span id="p-val">6</span> <button onclick="updateAtom('p', 1)">+</button>
        </div>
        <div class="panel-box" style="border: 2px solid #e74c3c; background: #fff5f5;">
            <label>ä¸­å­ (N) - é™·é˜±å€</label><br>
            <button onclick="updateAtom('n', -1)">-</button> <span id="n-val">6</span> <button onclick="updateAtom('n', 1)">+</button>
        </div>
        <div class="panel-box">
            <label>é›»å­ (e)</label><br>
            <button onclick="updateAtom('e', -1)">-</button> <span id="e-val">6</span> <button onclick="updateAtom('e', 1)">+</button>
        </div>
    </div>

    <div style="margin-top:20px; padding:15px; background:#e8f6f3; border-radius:10px;">
        <div>åŸå­åºï¼š<span id="atomic-num" style="font-weight:bold; color:blue;">6 (C ç¢³)</span></div>
        <div>è³ªé‡æ•¸ï¼š<span id="mass-num" style="font-weight:bold;">12</span></div>
    </div>
</div>

<div id="heat" class="lab-container">
    <button class="trap-btn" onclick="showTrap('mix')">âš ï¸ é–‹å•Ÿé™·é˜±é¡Œï¼šæ··åˆæ°´æº«</button>

    <h3 style="text-align:center">åŸºæœ¬é¡Œï¼šæ°´ vs æ²¹ (ç›¸åŒç†±æº)</h3>
    <div class="heat-stage">
        <div style="position:relative; margin:0 20px;">
            <div style="text-align:center; font-weight:bold;">æ°´ (S=1)</div>
            <div class="beaker"><div class="liquid" style="background:rgba(52,152,219,0.5)"></div></div>
            <div class="thermometer"><div class="mercury" id="merc-water"></div></div>
        </div>
        <div style="position:relative; margin:0 20px;">
            <div style="text-align:center; font-weight:bold;">æ²¹ (S=0.5)</div>
            <div class="beaker"><div class="liquid" style="background:rgba(241,196,15,0.5)"></div></div>
            <div class="thermometer"><div class="mercury" id="merc-oil"></div></div>
        </div>
    </div>
    <input type="range" min="0" max="100" value="0" style="width:100%" oninput="updateHeat(this.value)">
    <p style="text-align:center; color:#666;">æ‹–å‹•æ»‘æ¡¿æ¨¡æ“¬åŠ ç†±æ™‚é–“</p>
</div>

<div id="modal-isotope" class="modal-overlay" onclick="closeModal()">
    <div class="modal-box" onclick="event.stopPropagation()">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <h3>â›” é™·é˜±è­¦å‘Š</h3>
        <p style="font-size:1.2rem; font-weight:bold;">é¡Œç›®ï¼šå¦‚æœä¸­å­æ•¸å¾ 6 è®Šæˆ 8ï¼Œ<br>å®ƒæœƒè®Šæˆæ–°çš„å…ƒç´ å—ï¼Ÿ</p>
        
        <div class="trap-visual">
            <div style="text-align:center;">
                <div style="font-size:3rem; font-weight:bold; color:#2c3e50;" id="trap-symbol">C</div>
                <div style="font-size:1rem;">åŸå­åº (P) = 6 (æ°¸é ä¸è®Š)</div>
                <div style="font-size:1rem; color:#e74c3c;">è³ªé‡æ•¸ (P+N) = <span id="trap-mass">12</span></div>
            </div>
        </div>

        <button class="trap-btn" style="position:static; animation:none; font-size:1.2rem;" onclick="trapActionIso()">ğŸ‘‰ åŠ å…¥ä¸­å­è©¦è©¦çœ‹</button>
        <p id="iso-result" style="margin-top:15px; font-weight:bold; color:blue; display:none;">
            ç­”æ¡ˆï¼šä¸æœƒï¼å®ƒé‚„æ˜¯ç¢³ (Carbon)ã€‚<br>èº«ä»½è­‰(P)æ²’è®Šï¼Œåªæ˜¯è®Šèƒ–äº†(åŒä½ç´ )ï¼
        </button>
    </div>
</div>

<div id="modal-mix" class="modal-overlay" onclick="closeModal()">
    <div class="modal-box" onclick="event.stopPropagation()">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <h3>â›” é™·é˜±è­¦å‘Š</h3>
        <p style="font-size:1.1rem;">é¡Œç›®ï¼šæŠŠ 100g 80Â°C çš„ã€Œéµå¡Šã€ä¸Ÿå…¥ 100g 20Â°C çš„å†·æ°´ä¸­ï¼Œ<br>æœ«æº«æœƒæ˜¯ 50Â°C å—ï¼Ÿ</p>
        
        <div class="trap-visual" style="flex-direction:column; justify-content:space-around;">
            <div style="width:90%;">
                <div style="display:flex; justify-content:space-between; font-size:0.8rem;">
                    <span>è‹¥æ˜¯ç†±æ°´ (S=1) å¸¶çš„ç†±é‡</span>
                    <span>100%</span>
                </div>
                <div class="balance-bar"><div class="bar-fill" style="width:100%; background:#3498db;"></div></div>
            </div>
            <div style="width:90%;">
                <div style="display:flex; justify-content:space-between; font-size:0.8rem;">
                    <span>è‹¥æ˜¯éµå¡Š (S=0.1) å¸¶çš„ç†±é‡</span>
                    <span>11%</span>
                </div>
                <div class="balance-bar"><div class="bar-fill" id="iron-heat" style="width:0%;"></div></div>
            </div>
        </div>

        <button class="trap-btn" style="position:static; animation:none; font-size:1.2rem;" onclick="trapActionMix()">ğŸ‘‰ ä¸Ÿé€²å»é‡æº«åº¦</button>
        <p id="mix-result" style="margin-top:15px; font-weight:bold; color:blue; display:none;">
            ç­”æ¡ˆï¼šä¸åˆ° 30Â°Cï¼<br>éµçš„æ¯”ç†±å°ï¼Œå¸¶çš„ç†±é‡å°‘ï¼Œæ ¹æœ¬ç†±ä¸èµ·ä¾†ï¼
        </button>
    </div>
</div>

<div class="brand-watermark">STEM INSIGHT</div>

<script>
    function switchTab(id) {
        document.querySelectorAll('.lab-container').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        event.target.classList.add('active');
    }

    function showTrap(type) {
        document.getElementById('modal-' + type).style.display = 'flex';
    }

    function closeModal() {
        document.querySelectorAll('.modal-overlay').forEach(el => el.style.display = 'none');
        // é‡ç½®ç‹€æ…‹
        document.getElementById('iso-result').style.display = 'none';
        document.getElementById('mix-result').style.display = 'none';
        document.getElementById('trap-mass').innerText = '12';
        document.getElementById('iron-heat').style.width = '0%';
    }

    // --- é™·é˜±é‚è¼¯ ---
    function trapActionIso() {
        // æ¨¡æ“¬ä¸­å­å¢åŠ 
        let m = 12;
        const interval = setInterval(() => {
            m++;
            document.getElementById('trap-mass').innerText = m;
            if(m >= 14) {
                clearInterval(interval);
                document.getElementById('iso-result').style.display = 'block';
            }
        }, 300);
    }

    function trapActionMix() {
        document.getElementById('iron-heat').style.width = '11%';
        setTimeout(() => {
            document.getElementById('mix-result').style.display = 'block';
        }, 1000);
    }

    // --- åŸºç¤åŸå­é‚è¼¯ (ç°¡åŒ–ç‰ˆ) ---
    let p = 6, n = 6, e = 6;
    const elements = { 1:'H', 2:'He', 3:'Li', 4:'Be', 5:'B', 6:'C', 7:'N', 8:'O' };

    function updateAtom(type, d) {
        if(type==='p') p = Math.max(1, p+d);
        if(type==='n') n = Math.max(0, n+d);
        if(type==='e') e = Math.max(0, e+d);
        
        document.getElementById('p-val').innerText = p;
        document.getElementById('n-val').innerText = n;
        document.getElementById('e-val').innerText = e;
        
        document.getElementById('p-disp').innerText = "P:"+p;
        document.getElementById('n-disp').innerText = "N:"+n;
        
        document.getElementById('mass-num').innerText = p+n;
        let symbol = elements[p] || "X";
        document.getElementById('atomic-num').innerText = p + " (" + symbol + ")";
        
        renderElectrons();
    }

    function renderElectrons() {
        const c = document.getElementById('electrons-container');
        c.innerHTML = '';
        for(let i=0; i<e; i++) {
            let el = document.createElement('div');
            el.className = 'electron';
            let r = i<2 ? 70 : 110;
            let ang = (i * (360/Math.max(1, e))) * (Math.PI/180);
            el.style.left = (150 + r*Math.cos(ang) - 6) + 'px';
            el.style.top = (150 + r*Math.sin(ang) - 6) + 'px';
            c.appendChild(el);
        }
    }

    // --- åŸºç¤æ¯”ç†±é‚è¼¯ ---
    function updateHeat(val) {
        document.getElementById('merc-water').style.height = (20 + val * 0.4) + '%';
        document.getElementById('merc-oil').style.height = (20 + val * 0.8) + '%'; // æ²¹å‡æº«å¿«
    }

    renderElectrons();
</script>
</body>
</html>