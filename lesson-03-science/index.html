<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>åŸå­èˆ‡ç†±é‡å¯¦é©—å®¤ | STEM INSIGHT</title>
    <style>
        :root { --primary: #1a2a6c; --secondary: #b21f1f; --accent: #fdbb2d; }
        body { font-family: 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; background: #f0f2f5; margin: 0; display: flex; flex-direction: column; align-items: center; }
        
        .brand-watermark { position: fixed; bottom: 20px; right: 20px; background: rgba(26, 42, 108, 0.8); color: white; padding: 8px 15px; border-radius: 50px; font-size: 12px; pointer-events: none; z-index: 100; }
        
        header { width: 100%; background: var(--primary); color: white; padding: 15px 0; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        h2 { margin: 0; }
        
        /* åˆ‡æ›æ¨™ç±¤ */
        .tabs { display: flex; gap: 20px; margin: 20px 0; }
        .tab-btn { padding: 10px 25px; border: none; background: white; border-radius: 20px; cursor: pointer; font-weight: bold; color: #555; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: 0.3s; }
        .tab-btn.active { background: var(--secondary); color: white; transform: scale(1.05); }

        .lab-container { width: 90%; max-width: 800px; background: white; border-radius: 15px; padding: 30px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); display: none; animation: fadeIn 0.5s; }
        .lab-container.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- åŸå­å¯¦é©—å®¤æ¨£å¼ --- */
        .atom-stage { position: relative; width: 300px; height: 300px; margin: 20px auto; }
        .nucleus { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 60px; height: 60px; background: radial-gradient(circle, #ff6b6b, #c0392b); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; z-index: 10; box-shadow: 0 0 15px rgba(192, 57, 43, 0.5); }
        
        .orbit { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); border: 1px dashed #ccc; border-radius: 50%; }
        .orbit-1 { width: 140px; height: 140px; }
        .orbit-2 { width: 220px; height: 220px; }
        
        .electron { position: absolute; width: 12px; height: 12px; background: #3498db; border-radius: 50%; box-shadow: 0 0 5px #3498db; transition: 0.5s; }

        .control-panel { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 20px; text-align: center; }
        .panel-box { background: #f8f9fa; padding: 10px; border-radius: 10px; border: 1px solid #eee; }
        .panel-box button { width: 30px; height: 30px; cursor: pointer; }
        
        .info-display { margin-top: 20px; padding: 15px; background: #e8f6f3; border-radius: 10px; border-left: 5px solid #1abc9c; }

        /* --- æ¯”ç†±å¯¦é©—å®¤æ¨£å¼ --- */
        .heat-stage { display: flex; justify-content: space-around; align-items: flex-end; height: 250px; margin-bottom: 20px; border-bottom: 5px solid #555; padding-bottom: 10px; position: relative; }
        .beaker { width: 100px; height: 150px; border: 3px solid #333; border-top: none; position: relative; display: flex; flex-direction: column; justify-content: flex-end; background: rgba(255,255,255,0.5); }
        .liquid { width: 100%; transition: height 0.5s; position: relative; }
        .liquid-water { height: 80%; background: rgba(52, 152, 219, 0.6); } /* æ°´ */
        .liquid-oil { height: 80%; background: rgba(241, 196, 15, 0.6); } /* æ²¹ */
        
        .thermometer { position: absolute; right: -10px; bottom: 0; width: 6px; height: 120px; background: #ddd; border-radius: 3px; }
        .mercury { position: absolute; bottom: 0; width: 100%; background: #e74c3c; transition: height 0.2s; height: 20%; border-radius: 0 0 3px 3px; }
        
        .fire { position: absolute; bottom: -40px; left: 50%; transform: translateX(-50%); font-size: 2rem; opacity: 0.2; transition: 0.3s; }
        .heating .fire { opacity: 1; transform: translateX(-50%) scale(1.2); }

        .temp-label { position: absolute; top: -30px; width: 100%; text-align: center; font-weight: bold; font-size: 1.2rem; }
    </style>
</head>
<body>

<header>
    <h2>STEM INSIGHT | ç†åŒ–å¯¦é©—å®¤</h2>
</header>

<div class="tabs">
    <button class="tab-btn active" onclick="switchTab('atom')">âš›ï¸ åŸå­çµæ§‹</button>
    <button class="tab-btn" onclick="switchTab('heat')">ğŸ”¥ æ¯”ç†±æ¨¡æ“¬</button>
</div>

<div id="atom" class="lab-container active">
    <h3 style="text-align:center;">å»ºæ§‹ä½ çš„åŸå­æ¨¡å‹</h3>
    <div class="atom-stage">
        <div class="orbit orbit-2"></div>
        <div class="orbit orbit-1"></div>
        <div class="nucleus">
            <div style="text-align:center; font-size:12px;">
                <div id="p-disp">P:1</div>
                <div id="n-disp">N:0</div>
            </div>
        </div>
        <div id="electrons-container"></div>
    </div>

    <div class="control-panel">
        <div class="panel-box">
            <label>è³ªå­ (P+)</label><br>
            <button onclick="updateAtom('p', -1)">-</button>
            <span id="p-val" style="margin:0 10px; font-weight:bold;">1</span>
            <button onclick="updateAtom('p', 1)">+</button>
        </div>
        <div class="panel-box">
            <label>ä¸­å­ (N)</label><br>
            <button onclick="updateAtom('n', -1)">-</button>
            <span id="n-val" style="margin:0 10px; font-weight:bold;">0</span>
            <button onclick="updateAtom('n', 1)">+</button>
        </div>
        <div class="panel-box">
            <label>é›»å­ (e-)</label><br>
            <button onclick="updateAtom('e', -1)">-</button>
            <span id="e-val" style="margin:0 10px; font-weight:bold;">1</span>
            <button onclick="updateAtom('e', 1)">+</button>
        </div>
    </div>

    <div class="info-display">
        <strong>ğŸ§ª å…ƒç´ åˆ†æï¼š</strong><br>
        è³ªé‡æ•¸ (P+N) = <span id="mass-num">1</span><br>
        åŸå­åº (P) = <span id="atomic-num">1</span><br>
        å¸¶é›»ç‹€æ…‹ï¼š<span id="charge-status">ä¸­æ€§</span>
    </div>
</div>

<div id="heat" class="lab-container">
    <h3 style="text-align:center;">èª°ç†±å¾—æ¯”è¼ƒå¿«ï¼Ÿ(è³ªé‡ç›¸åŒ M=100g)</h3>
    <div class="heat-stage">
        <div class="beaker-wrap" style="position:relative;">
            <div class="temp-label" id="temp-water">20Â°C</div>
            <div class="beaker">
                <div class="liquid liquid-water"></div>
                <div style="position:absolute; width:100%; text-align:center; bottom:10px; font-weight:bold; color:white;">æ°´ (S=1)</div>
            </div>
            <div class="thermometer"><div class="mercury" id="merc-water"></div></div>
            <div class="fire" id="fire-water">ğŸ”¥</div>
        </div>

        <div class="beaker-wrap" style="position:relative;">
            <div class="temp-label" id="temp-oil">20Â°C</div>
            <div class="beaker">
                <div class="liquid liquid-oil"></div>
                <div style="position:absolute; width:100%; text-align:center; bottom:10px; font-weight:bold; color:black;">æ²¹ (S=0.5)</div>
            </div>
            <div class="thermometer"><div class="mercury" id="merc-oil"></div></div>
            <div class="fire" id="fire-oil">ğŸ”¥</div>
        </div>
    </div>

    <div style="padding: 20px; background: #eee; border-radius: 10px;">
        <label>åŠ ç†±æ™‚é–“æ§åˆ¶ (H)ï¼š</label>
        <input type="range" min="0" max="100" value="0" style="width:100%;" oninput="updateHeat(this.value)">
        <p style="font-size: 0.9rem; color: #555;">å…¬å¼ï¼šH = M Ã— S Ã— Î”T <br> (ç›¸åŒç†±é‡ä¸‹ï¼Œæ¯”ç†± S å°çš„æ²¹ï¼Œæº«åº¦è®ŠåŒ– Î”T æ¯”è¼ƒå¤§ï¼)</p>
    </div>
</div>

<div class="brand-watermark">STEM INSIGHT</div>

<script>
    function switchTab(id) {
        document.querySelectorAll('.lab-container').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        event.target.classList.add('active');
    }

    // --- åŸå­é‚è¼¯ ---
    let p = 1, n = 0, e = 1;
    
    function updateAtom(type, delta) {
        if(type === 'p') p = Math.max(1, p + delta);
        if(type === 'n') n = Math.max(0, n + delta);
        if(type === 'e') e = Math.max(0, e + delta);

        document.getElementById('p-val').innerText = p;
        document.getElementById('n-val').innerText = n;
        document.getElementById('e-val').innerText = e;
        document.getElementById('p-disp').innerText = "P:" + p;
        document.getElementById('n-disp').innerText = "N:" + n;

        document.getElementById('mass-num').innerText = p + n;
        document.getElementById('atomic-num').innerText = p;

        let charge = p - e;
        let status = charge === 0 ? "ä¸­æ€§åŸå­" : (charge > 0 ? `æ­£é›¢å­ (+${charge})` : `è² é›¢å­ (${charge})`);
        document.getElementById('charge-status').innerText = status;
        document.getElementById('charge-status').style.color = charge === 0 ? "green" : "red";

        renderElectrons();
    }

    function renderElectrons() {
        const container = document.getElementById('electrons-container');
        container.innerHTML = '';
        
        // ç°¡å–®è»ŒåŸŸè¦å‰‡ï¼šç¬¬ä¸€å±¤æœ€å¤š2ï¼Œç¬¬äºŒå±¤æœ€å¤š8
        for(let i=0; i<e; i++) {
            let el = document.createElement('div');
            el.className = 'electron';
            
            let radius, angle;
            if(i < 2) { // Kå±¤
                radius = 70; // orbit-1 radius
                angle = (i * 180) * (Math.PI / 180);
            } else { // Lå±¤
                radius = 110; // orbit-2 radius
                angle = ((i - 2) * (360 / Math.max(1, e-2))) * (Math.PI / 180);
            }

            // ä¸­å¿ƒé» 150, 150
            let x = 150 + radius * Math.cos(angle) - 6;
            let y = 150 + radius * Math.sin(angle) - 6;
            
            el.style.left = x + 'px';
            el.style.top = y + 'px';
            container.appendChild(el);
        }
    }

    // --- æ¯”ç†±é‚è¼¯ ---
    function updateHeat(val) {
        // H = 100 * S * dT => dT = H / (100 * S)
        // å‡è¨­ H æ­£æ¯”æ–¼ val
        let heat = val * 200; // æ¨¡æ“¬ç†±é‡
        
        // æ°´ S=1
        let dtWater = heat / (100 * 1);
        let tempWater = 20 + dtWater;
        
        // æ²¹ S=0.5
        let dtOil = heat / (100 * 0.5);
        let tempOil = 20 + dtOil;

        // æ›´æ–°é¡¯ç¤º
        document.getElementById('temp-water').innerText = Math.round(tempWater) + "Â°C";
        document.getElementById('temp-oil').innerText = Math.round(tempOil) + "Â°C";

        // æ›´æ–°æº«åº¦è¨ˆ (é«˜åº¦æ¨¡æ“¬)
        document.getElementById('merc-water').style.height = (20 + dtWater/2) + "%";
        document.getElementById('merc-oil').style.height = (20 + dtOil/2) + "%"; // æ²¹å‡æº«å¿«ï¼Œé«˜åº¦é«˜

        // ç«ç„°ç‰¹æ•ˆ
        if(val > 0) {
            document.getElementById('fire-water').parentElement.classList.add('heating');
            document.getElementById('fire-oil').parentElement.classList.add('heating');
        } else {
            document.getElementById('fire-water').parentElement.classList.remove('heating');
            document.getElementById('fire-oil').parentElement.classList.remove('heating');
        }
    }

    // åˆå§‹åŒ–
    renderElectrons();
</script>
</body>
</html>