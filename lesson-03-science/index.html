<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ²›å¦¤çš„ç†åŒ–ç‰¹è¨“ç­ | è§€å¿µ & å¯¦æˆ°ä¸€é«”æ©Ÿ</title>
    <style>
        :root { 
            --primary: #2c3e50; 
            --accent: #2980b9; 
            --heat: #e74c3c; 
            --atom: #8e44ad; 
            --bg: #ecf0f1;
            --correct: #27ae60;
            --wrong: #c0392b;
        }
        body { font-family: 'Microsoft JhengHei', sans-serif; background: var(--bg); margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        
        /* å°èˆªå€ */
        .nav-bar { display: flex; gap: 10px; margin-bottom: 20px; background: white; padding: 10px; border-radius: 50px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .nav-step { padding: 10px 25px; border-radius: 40px; cursor: pointer; font-weight: bold; color: #7f8c8d; transition: 0.3s; display: flex; align-items: center; gap: 5px; }
        .nav-step.active { background: var(--primary); color: white; transform: scale(1.05); }
        .nav-step.locked { opacity: 0.5; cursor: not-allowed; pointer-events: none; }

        /* ä¸»èˆå° */
        .stage { width: 100%; max-width: 900px; background: white; border-radius: 20px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); min-height: 500px; position: relative; display: none; }
        .stage.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* æŒ‡å¼•æ¡† (æ¸›å°‘è€å¸«å£è¿°) */
        .guide-box { background: #fff3cd; border-left: 5px solid #f1c40f; padding: 15px; margin-bottom: 20px; font-size: 1.1rem; border-radius: 5px; display: flex; align-items: center; justify-content: space-between; }
        .guide-text { font-weight: bold; color: #7f6a06; }
        .guide-action { background: var(--accent); color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* --- ç†±å­¸å€å¡Šæ¨£å¼ --- */
        .heat-lab { display: flex; justify-content: space-around; align-items: flex-end; height: 250px; border-bottom: 5px solid #555; position: relative; margin-top: 30px; }
        .beaker-container { text-align: center; position: relative; width: 120px; }
        .beaker { width: 100px; height: 140px; border: 3px solid #333; border-top: none; position: relative; background: rgba(255,255,255,0.8); margin: 0 auto; border-radius: 0 0 10px 10px; overflow: hidden; }
        .liquid { position: absolute; bottom: 0; width: 100%; transition: 0.5s; }
        .thermometer { position: absolute; right: -10px; bottom: 0; width: 8px; height: 160px; background: #ddd; border: 1px solid #999; border-radius: 4px; }
        .mercury { position: absolute; bottom: 0; width: 100%; background: var(--heat); transition: height 0.2s; height: 20%; border-radius: 0 0 4px 4px; }
        .fire { width: 60px; height: 60px; background: radial-gradient(circle, yellow, red, transparent); position: absolute; bottom: -50px; left: 30px; border-radius: 50% 50% 0 0; opacity: 0; transition: 0.3s; filter: blur(2px); }
        .fire.on { opacity: 1; animation: burn 0.2s infinite alternate; }
        @keyframes burn { from { transform: scale(1); } to { transform: scale(1.1) translateY(-2px); } }

        /* --- åŸå­å€å¡Šæ¨£å¼ --- */
        .atom-container { display: flex; flex-direction: column; align-items: center; }
        .atom-visual { width: 300px; height: 300px; position: relative; margin: 20px; }
        .orbit { border: 1px dashed #bbb; border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .nucleus { width: 60px; height: 60px; background: var(--atom); border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; font-weight: bold; z-index: 10; font-size: 0.9rem; transition: 0.3s; }
        .nucleus.shake { animation: shake 0.5s; }
        @keyframes shake { 0%, 100% { transform: translate(-50%, -50%); } 25% { transform: translate(-55%, -50%); } 75% { transform: translate(-45%, -50%); } }
        .electron { width: 12px; height: 12px; background: var(--accent); border-radius: 50%; position: absolute; }
        
        .control-panel { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 20px; }
        .ctrl-btn { padding: 10px 20px; font-size: 1.2rem; cursor: pointer; border: 1px solid #ccc; background: white; border-radius: 5px; }
        .ctrl-btn:hover { background: #eee; }

        /* --- é¡Œç›®å¡æ¨£å¼ (Overlay) --- */
        .question-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 999; display: none; justify-content: center; align-items: center; }
        .question-card { background: white; width: 90%; max-width: 600px; padding: 30px; border-radius: 15px; text-align: left; position: relative; border-top: 8px solid var(--accent); }
        .q-tag { background: var(--primary); color: white; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem; display: inline-block; margin-bottom: 10px; }
        .q-content { font-size: 1.2rem; font-weight: bold; margin-bottom: 20px; color: #333; line-height: 1.5; }
        .q-options { display: flex; flex-direction: column; gap: 10px; }
        .q-opt { padding: 15px; border: 2px solid #eee; border-radius: 10px; cursor: pointer; transition: 0.2s; font-size: 1.1rem; }
        .q-opt:hover { background: #f0f8ff; border-color: var(--accent); }
        .q-opt.correct { background: #d4edda; border-color: var(--correct); color: #155724; }
        .q-opt.wrong { background: #f8d7da; border-color: var(--wrong); color: #721c24; }
        
        .q-feedback { margin-top: 15px; padding: 15px; background: #eef; border-radius: 5px; display: none; }
        .btn-continue { margin-top: 20px; padding: 10px 30px; background: var(--primary); color: white; border: none; border-radius: 50px; font-size: 1.1rem; cursor: pointer; float: right; display: none; }

        /* åœ–è¡¨æ¨¡æ“¬ */
        .chart-mockup { width: 100%; height: 150px; border-left: 2px solid black; border-bottom: 2px solid black; position: relative; margin: 20px 0; }
        .line-a { position: absolute; bottom: 0; left: 0; width: 100%; height: 100%; border-top: 2px solid red; transform-origin: bottom left; transform: rotate(-25deg); }
        .line-b { position: absolute; bottom: 0; left: 0; width: 100%; height: 100%; border-top: 2px solid blue; transform-origin: bottom left; transform: rotate(-45deg); }
        .chart-label { position: absolute; font-size: 0.8rem; }
    </style>
</head>
<body>

<div class="nav-bar">
    <div class="nav-step active" id="nav-1">1. ç†±å­¸å¯¦é©—</div>
    <div class="nav-step locked" id="nav-2">2. ç†±å­¸å¯¦æˆ°é¡Œ</div>
    <div class="nav-step locked" id="nav-3">3. åŸå­çµæ§‹</div>
    <div class="nav-step locked" id="nav-4">4. åŸå­é™·é˜±é¡Œ</div>
    <div class="nav-step locked" id="nav-5">5. æœ€çµ‚è€ƒæ ¸</div>
</div>

<div id="stage-1" class="stage active">
    <div class="guide-box">
        <span class="guide-text">ğŸ¯ ä»»å‹™ï¼šè§€å¯Ÿã€Œæ°´ã€è·Ÿã€Œæ²¹ã€èª°çš„è„¾æ°£æ¯”è¼ƒå·® (å‡æº«å¿«)ï¼Ÿ</span>
        <button class="guide-action" onmousedown="heatLabStart()" onmouseup="heatLabStop()">ğŸ”¥ æŒ‰ä½é»ç« (é•·æŒ‰)</button>
    </div>

    <div class="heat-lab">
        <div class="beaker-container">
            <div style="font-weight:bold; color:blue;">æ°´ (100g)</div>
            <div style="font-size:0.8rem; color:#777;">æ¯”ç†± S = 1.0</div>
            <div class="beaker">
                <div class="liquid" style="height:60%; background:rgba(52,152,219,0.5)"></div>
            </div>
            <div class="thermometer"><div class="mercury" id="merc-water"></div></div>
            <div class="fire" id="fire-water"></div>
            <div id="temp-water-display" style="font-weight:bold; margin-top:5px;">20Â°C</div>
        </div>

        <div class="beaker-container">
            <div style="font-weight:bold; color:#d35400;">æ²¹ (100g)</div>
            <div style="font-size:0.8rem; color:#777;">æ¯”ç†± S = 0.5 (å°)</div>
            <div class="beaker">
                <div class="liquid" style="height:60%; background:rgba(241,196,15,0.5)"></div>
            </div>
            <div class="thermometer"><div class="mercury" id="merc-oil"></div></div>
            <div class="fire" id="fire-oil"></div>
            <div id="temp-oil-display" style="font-weight:bold; margin-top:5px;">20Â°C</div>
        </div>
    </div>
    
    <div style="text-align:center; margin-top:20px;">
        <p id="heat-obs-text" style="color:#aaa;">(è«‹æŒçºŒåŠ ç†±ç›´åˆ°æº«åº¦è¶…é 80Â°C...)</p>
        <button id="btn-to-q1" class="guide-action" style="display:none; background:#27ae60;" onclick="showQuestion(1)">ğŸ‘‰ å¯¦é©—å®Œæˆï¼é€²å…¥é¡Œç›®é©—è­‰</button>
    </div>
</div>

<div id="stage-3" class="stage">
    <div class="guide-box">
        <span class="guide-text">ğŸ¯ ä»»å‹™ï¼šè©¦è©¦çœ‹ï¼Œæ”¹è®Šèª°æœƒè®Šæ›´ã€Œå…ƒç´ ç¨®é¡ã€ï¼Ÿ</span>
    </div>

    <div class="atom-container">
        <div class="atom-visual">
            <div class="orbit" style="width:120px; height:120px;" id="orbit-1"></div>
            <div class="orbit" style="width:220px; height:220px;" id="orbit-2"></div>
            <div class="nucleus" id="nucleus-display">
                <span>P: 6</span>
                <span>N: 6</span>
            </div>
        </div>

        <div class="control-panel">
            <div style="text-align:center;">
                <label>è³ªå­ (P)</label><br>
                <button class="ctrl-btn" onclick="modifyAtom('p', -1)">-</button>
                <span id="val-p" style="margin:0 10px; font-weight:bold;">6</span>
                <button class="ctrl-btn" onclick="modifyAtom('p', 1)">+</button>
            </div>
            <div style="text-align:center; border: 2px dashed orange; padding: 5px; border-radius:10px;">
                <label>ä¸­å­ (N) <small>(é™·é˜±å€)</small></label><br>
                <button class="ctrl-btn" onclick="modifyAtom('n', -1)">-</button>
                <span id="val-n" style="margin:0 10px; font-weight:bold;">6</span>
                <button class="ctrl-btn" onclick="modifyAtom('n', 1)">+</button>
            </div>
            <div style="text-align:center;">
                <label>é›»å­ (e)</label><br>
                <button class="ctrl-btn" onclick="modifyAtom('e', -1)">-</button>
                <span id="val-e" style="margin:0 10px; font-weight:bold;">6</span>
                <button class="ctrl-btn" onclick="modifyAtom('e', 1)">+</button>
            </div>
        </div>

        <div style="margin-top:20px; padding:15px; background:#f4f4f4; border-radius:10px; width:100%; text-align:center;">
            ç›®å‰å…ƒç´ ï¼š<span id="atom-name" style="color:blue; font-size:1.5rem; font-weight:bold;">C (ç¢³)</span>
            <div style="font-size:0.9rem; color:#666; margin-top:5px;">ç‹€æ…‹ï¼š<span id="atom-charge">é›»ä¸­æ€§</span></div>
        </div>

        <button id="btn-to-q2" class="guide-action" style="margin-top:20px; display:none; background:#27ae60;" onclick="showQuestion(2)">ğŸ‘‰ æŠ“åˆ°è¦å¾‹äº†ï¼é€²å…¥é™·é˜±é¡Œ</button>
    </div>
</div>

<div id="stage-5" class="stage">
    <div style="text-align:center; padding:50px;">
        <h2>ğŸ“ ç•¢æ¥­è€ƒï¼š10 é¡Œè§€å¿µé€Ÿæ¸¬</h2>
        <p>è«‹é‹ç”¨å‰›å‰›å¯¦é©—çœ‹åˆ°çš„ç•«é¢ä¾†ä½œç­”ã€‚</p>
        <button class="guide-action" style="font-size:1.5rem; padding:15px 40px;" onclick="startFinalQuiz()">é–‹å§‹æ¸¬é©—</button>
    </div>
</div>

<div id="question-layer" class="question-overlay">
    <div class="question-card">
        <div class="q-tag" id="q-tag">è§€å¿µæª¢æ¸¬</div>
        <div class="q-content" id="q-text">é¡Œç›®è¼‰å…¥ä¸­...</div>
        
        <div id="q-chart-area" style="display:none; text-align:center; margin-bottom:15px;">
            <div style="width:200px; height:150px; border-left:2px solid black; border-bottom:2px solid black; position:relative; margin:0 auto;">
                <div style="position:absolute; left:-30px; top:0;">æº«<br>åº¦</div>
                <div style="position:absolute; right:0; bottom:-25px;">åŠ ç†±æ™‚é–“</div>
                <div style="position:absolute; bottom:0; left:0; width:100%; height:80%; border-top:3px solid red; transform-origin:bottom left; transform:rotate(-45deg);"></div>
                <div style="position:absolute; top:10px; right:20px; color:red; font-weight:bold;">ç”²</div>
                <div style="position:absolute; bottom:0; left:0; width:100%; height:40%; border-top:3px solid blue; transform-origin:bottom left; transform:rotate(-20deg);"></div>
                <div style="position:absolute; top:80px; right:20px; color:blue; font-weight:bold;">ä¹™</div>
            </div>
        </div>

        <div class="q-options" id="q-options"></div>
        
        <div class="q-feedback" id="q-feedback">
            <h4 id="fb-title" style="margin:0 0 5px 0;">è§£æ</h4>
            <span id="fb-content"></span>
        </div>

        <button class="btn-continue" id="q-next-btn" onclick="nextStage()">ä¸‹ä¸€é—œ â”</button>
    </div>
</div>

<script>
    // --- å…¨å±€ç‹€æ…‹ ---
    let tempW = 20, tempO = 20;
    let heatInterval = null;
    let p = 6, n = 6, e = 6;
    const elements = { 1:'H', 2:'He', 3:'Li', 4:'Be', 5:'B', 6:'C', 7:'N', 8:'O', 9:'F', 10:'Ne', 11:'Na' };
    
    // --- ç†±å­¸å¯¦é©—é‚è¼¯ ---
    function heatLabStart() {
        document.getElementById('fire-water').classList.add('on');
        document.getElementById('fire-oil').classList.add('on');
        
        if(heatInterval) return;
        heatInterval = setInterval(() => {
            // æ²¹æ¯”ç†±(0.5)å°ï¼Œå‡æº«å¿«(x2)
            tempW += 0.5;
            tempO += 1.0; 

            if(tempW > 100) tempW = 100;
            if(tempO > 100) tempO = 100;

            updateHeatUI();

            // è§¸ç™¼æ¢ä»¶ï¼šç•¶æ²¹æº«è¶…é 80åº¦
            if(tempO >= 80) {
                document.getElementById('heat-obs-text').innerText = "è§€å¯Ÿåˆ°äº†å—ï¼Ÿæ²¹æº«é£†å‡å¾—æ¯”æ°´å¿«å¾ˆå¤šï¼";
                document.getElementById('heat-obs-text').style.color = "#d35400";
                document.getElementById('btn-to-q1').style.display = 'inline-block';
            }
        }, 100);
    }

    function heatLabStop() {
        document.getElementById('fire-water').classList.remove('on');
        document.getElementById('fire-oil').classList.remove('on');
        clearInterval(heatInterval);
        heatInterval = null;
    }

    function updateHeatUI() {
        document.getElementById('merc-water').style.height = tempW + '%';
        document.getElementById('merc-oil').style.height = tempO + '%';
        document.getElementById('temp-water-display').innerText = Math.floor(tempW) + 'Â°C';
        document.getElementById('temp-oil-display').innerText = Math.floor(tempO) + 'Â°C';
    }

    // --- åŸå­å¯¦é©—é‚è¼¯ ---
    let atomModifiedCount = 0;
    function modifyAtom(type, delta) {
        if(type === 'p') p = Math.max(1, Math.min(11, p + delta));
        if(type === 'n') n = Math.max(0, n + delta);
        if(type === 'e') e = Math.max(0, e + delta);

        // UI æ›´æ–°
        document.getElementById('val-p').innerText = p;
        document.getElementById('val-n').innerText = n;
        document.getElementById('val-e').innerText = e;
        
        const nucleus = document.getElementById('nucleus-display');
        nucleus.innerHTML = `<span>P: ${p}</span><span>N: ${n}</span>`;
        
        // è¦–è¦ºç‰¹æ•ˆï¼šå¦‚æœæ˜¯ N æ”¹è®Šï¼Œè®“åŸå­æ ¸æŠ–å‹• (ä»£è¡¨è®Šèƒ–ä½†æ²’è®Šæ€§)
        if(type === 'n') {
            nucleus.classList.remove('shake');
            void nucleus.offsetWidth;
            nucleus.classList.add('shake');
        }

        // å…ƒç´ åç¨±åˆ¤æ–·
        document.getElementById('atom-name').innerText = `${elements[p]} (${getChineseName(p)})`;
        
        // é›»è·åˆ¤æ–·
        let charge = p - e;
        let chargeText = charge === 0 ? "é›»ä¸­æ€§" : (charge > 0 ? `é™½é›¢å­ (+${charge})` : `é™°é›¢å­ (${charge})`);
        document.getElementById('atom-charge').innerText = chargeText;

        renderElectrons();

        // è§¸ç™¼ä»»å‹™ï¼šæ“ä½œè¶…é 5 æ¬¡é¡¯ç¤ºé¡Œç›®
        atomModifiedCount++;
        if(atomModifiedCount > 5) {
            document.getElementById('btn-to-q2').style.display = 'inline-block';
        }
    }

    function getChineseName(idx) {
        const names = ['æ°«','æ°¦','é‹°','éˆ¹','ç¡¼','ç¢³','æ°®','æ°§','æ°Ÿ','æ°–','éˆ‰'];
        return names[idx-1] || 'æœªçŸ¥';
    }

    function renderElectrons() {
        // ç°¡å–®æ¸²æŸ“ç¤ºæ„
        let k = Math.min(e, 2);
        let l = Math.max(0, e - 2);
        
        let html1 = '', html2 = '';
        for(let i=0; i<k; i++) {
            let angle = i * 180;
            html1 += `<div class="electron" style="top:50%; left:50%; transform:translate(-50%, -50%) rotate(${angle}deg) translateX(60px)"></div>`;
        }
        for(let i=0; i<l; i++) {
            let angle = i * (360/Math.max(1, l));
            html2 += `<div class="electron" style="top:50%; left:50%; transform:translate(-50%, -50%) rotate(${angle}deg) translateX(110px)"></div>`;
        }
        document.getElementById('orbit-1').innerHTML = html1;
        document.getElementById('orbit-2').innerHTML = html2;
    }

    // --- é¡Œç›®ç³»çµ± ---
    const questions = {
        1: {
            text: "ã€æœƒè€ƒé¡é¡Œã€‘å‰›å‰›çš„å¯¦é©—ä¸­ï¼Œæˆ‘å€‘ç”¨åŒæ¨£çš„ç«åŠ ç†±ã€‚è«‹å•å³åœ–ä¸­ï¼Œå“ªä¸€æ¢ç·šä»£è¡¨ã€Œæ²¹ã€ï¼Ÿ",
            hasChart: true,
            options: [
                { txt: "ç”² (ç´…è‰²é™¡å³­çš„ç·š)", correct: true, reason: "æ­£è§£ï¼æ²¹çš„æ¯”ç†±å°(0.5)ï¼Œä»£è¡¨å®ƒæ˜¯å€‹æ€¥é©šé¢¨ï¼Œæº«åº¦ä¸Šå‡éå¸¸å¿«ï¼Œæ‰€ä»¥ç·šæ¯”è¼ƒé™¡ã€‚" },
                { txt: "ä¹™ (è—è‰²å¹³ç·©çš„ç·š)", correct: false, reason: "éŒ¯ï¼é€™æ¢ç·šä¸Šå‡å¾ˆæ…¢ï¼Œé€™æ˜¯æ¯”ç†±å¤§(1.0)çš„æ°´ã€‚æ²¹çš„æº«åº¦æ‡‰è©²è¡å¾—æ¯”æ°´å¿«ï¼" }
            ],
            nextStage: 3 // è·³å»åŸå­
        },
        2: {
            text: "ã€è§€å¿µé™·é˜±ã€‘å¦‚æœä½ ä¸€ç›´åœ¨åŸå­æ ¸è£¡å¡ã€Œä¸­å­ã€ï¼Œé€™å€‹åŸå­æœƒè®Šæˆåˆ¥ç¨®å…ƒç´ å—ï¼Ÿ",
            hasChart: false,
            options: [
                { txt: "æœƒï¼Œå› ç‚ºè®Šé‡äº†", correct: false, reason: "éŒ¯ï¼è®Šé‡åªæ˜¯è®Šèƒ–(åŒä½ç´ )ï¼Œèº«åˆ†è­‰(è³ªå­)æ²’æ”¹ï¼Œå®ƒå°±é‚„æ˜¯åŸæœ¬çš„å…ƒç´ ï¼" },
                { txt: "ä¸æœƒï¼Œå®ƒé‚„æ˜¯åŒä¸€ç¨®å…ƒç´ ", correct: true, reason: "æ­£è§£ï¼è³ªå­æ•¸(P)æ‰æ˜¯èº«åˆ†è­‰ã€‚ä¸­å­åªæ˜¯æ±ºå®šèƒ–ç˜¦(è³ªé‡æ•¸)è€Œå·²ã€‚" }
            ],
            nextStage: 5 // è·³å»æ¸¬é©—
        }
    };

    let currentQID = 0;

    function showQuestion(id) {
        currentQID = id;
        const q = questions[id];
        document.getElementById('question-layer').style.display = 'flex';
        document.getElementById('q-text').innerText = q.text;
        document.getElementById('q-chart-area').style.display = q.hasChart ? 'block' : 'none';
        
        const optContainer = document.getElementById('q-options');
        optContainer.innerHTML = '';
        document.getElementById('q-feedback').style.display = 'none';
        document.getElementById('q-next-btn').style.display = 'none';

        q.options.forEach((opt, idx) => {
            let div = document.createElement('div');
            div.className = 'q-opt';
            div.innerText = opt.txt;
            div.onclick = () => checkAnswer(div, opt.correct, opt.reason, q.nextStage);
            optContainer.appendChild(div);
        });
    }

    function checkAnswer(div, isCorrect, reason, nextStageId) {
        if(isCorrect) {
            div.classList.add('correct');
            document.getElementById('fb-title').innerText = "ğŸ‰ ç­”å°äº†ï¼";
            document.getElementById('fb-title').style.color = "#155724";
            document.getElementById('q-next-btn').setAttribute('onclick', `nextStage(${nextStageId})`);
            document.getElementById('q-next-btn').style.display = 'block';
        } else {
            div.classList.add('wrong');
            document.getElementById('fb-title').innerText = "ğŸ’¡ å†æƒ³ä¸€ä¸‹";
            document.getElementById('fb-title').style.color = "#721c24";
        }
        document.getElementById('fb-content').innerText = reason;
        document.getElementById('q-feedback').style.display = 'block';
    }

    function nextStage(stageId) {
        document.getElementById('question-layer').style.display = 'none';
        
        // éš±è—æ‰€æœ‰ active
        document.querySelectorAll('.stage').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-step').forEach(el => el.classList.remove('active'));

        // é–‹å•Ÿç›®æ¨™
        document.getElementById('stage-' + stageId).classList.add('active');
        
        // æ›´æ–°å°èˆªæ¢
        if(stageId === 3) {
            document.getElementById('nav-2').classList.remove('locked'); 
            document.getElementById('nav-2').innerText = "âœ… ç†±å­¸é€šé—œ";
            document.getElementById('nav-3').classList.add('active');
            document.getElementById('nav-3').classList.remove('locked');
        } else if (stageId === 5) {
            document.getElementById('nav-4').classList.remove('locked');
            document.getElementById('nav-4').innerText = "âœ… åŸå­é€šé—œ";
            document.getElementById('nav-5').classList.add('active');
            document.getElementById('nav-5').classList.remove('locked');
        }
    }

    // --- æœ€çµ‚æ¸¬é©— (é€£çµåˆ°ä½ ä¹‹å‰çš„ 10 é¡Œ) ---
    // é€™è£¡ç‚ºäº†ç°¡åŒ–ï¼Œç›´æ¥ä½¿ç”¨åŒä¸€å¥—é‚è¼¯ï¼Œä½†æ‚¨å¯ä»¥ç›´æ¥è²¼ä¸Šä¹‹å‰çš„ 10 é¡Œ JSON
    function startFinalQuiz() {
        alert("æ­å–œé€²å…¥æœ€çµ‚è€ƒæ ¸ï¼é€™è£¡æœƒè¼‰å…¥ä¹‹å‰çš„ 10 é¡Œæ¸¬é©—æ¨¡çµ„ (æ­¤è™•ç‚ºæ¼”ç¤ºçµå°¾)ã€‚");
        // å¯¦éš›ä½¿ç”¨æ™‚ï¼Œé€™è£¡å¯ä»¥å‘¼å«ä¹‹å‰çš„ loadQuestion() å‡½å¼
    }

    // Init
    renderElectrons();
</script>
</body>
</html>